
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pyqstrat package &#8212; pyqstrat 0.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="pyqstrat" href="modules.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="pyqstrat-package">
<h1>pyqstrat package<a class="headerlink" href="#pyqstrat-package" title="Permalink to this heading">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading">¶</a></h2>
</div>
<div class="section" id="module-pyqstrat.pq_utils">
<span id="pyqstrat-pq-utils-module"></span><h2>pyqstrat.pq_utils module<a class="headerlink" href="#module-pyqstrat.pq_utils" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.Paths">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">Paths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#Paths"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.Paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Conventions for where to read / write data and reports</p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.Paths.create">
<span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#Paths.create"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.Paths.create" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.bootstrap_ci">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">bootstrap_ci</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ci_level=0.95</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n=1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func=&lt;function</span> <span class="pre">mean&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#bootstrap_ci"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.bootstrap_ci" title="Permalink to this definition">¶</a></dt>
<dd><p>Non parametric bootstrap for confidence intervals
:type a: <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>
:param a: The data to bootstrap from
:type ci_level: <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>
:param ci_level: The confidence interval level, e.g. 0.95 for 95%.  Default 0.95
:type n: <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>
:param n: Number of boostrap iterations. Default 1000
:type func: <code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]
:param func: The function to use, e.g np.mean or np.median. Default np.mean</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tuple containing the lower and upper ci</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">high</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">bootstrap_ci</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="p">(</span><span class="mf">4.9773159</span><span class="p">,</span> <span class="mf">5.010328</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.date_2_num">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">date_2_num</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#date_2_num"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.date_2_num" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.day_of_week_num">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">day_of_week_num</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#day_of_week_num"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.day_of_week_num" title="Permalink to this definition">¶</a></dt>
<dd><p>From <a class="reference external" href="https://stackoverflow.com/questions/52398383/finding-day-of-the-week-for-a-datetime64">https://stackoverflow.com/questions/52398383/finding-day-of-the-week-for-a-datetime64</a>
Get day of week for a numpy array of datetimes
Monday is 0, Sunday is 6</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>a</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – numpy datetime64 or array of datetime64</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Monday is 0, Sunday is 6</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int or numpy ndarray of int</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">day_of_week_num</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2015-01-04&#39;</span><span class="p">))</span>
<span class="go">6</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.day_symbol">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">day_symbol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">day_int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#day_symbol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.day_symbol" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.get_child_logger">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">get_child_logger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">child_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#get_child_logger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.get_child_logger" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Logger</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.get_empty_np_value">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">get_empty_np_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">np_dtype</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#get_empty_np_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.get_empty_np_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Get empty value for a given numpy datatype
&gt;&gt;&gt; a = np.array([‘2018-01-01’, ‘2018-01-03’], dtype = ‘M8[D]’)
&gt;&gt;&gt; get_empty_np_value(a.dtype)
numpy.datetime64(‘NaT’)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.get_main_logger">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">get_main_logger</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#get_main_logger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.get_main_logger" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Logger</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.get_paths">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">get_paths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#get_paths"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.get_paths" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#pyqstrat.pq_utils.Paths" title="pyqstrat.pq_utils.Paths"><code class="xref py py-class docutils literal notranslate"><span class="pre">Paths</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.get_temp_dir">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">get_temp_dir</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#get_temp_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.get_temp_dir" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.has_display">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">has_display</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#has_display"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.has_display" title="Permalink to this definition">¶</a></dt>
<dd><p>If we are running in unit test mode or on a server, then don’t try to draw graphs, etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.in_ipython">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">in_ipython</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#in_ipython"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.in_ipython" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether we are running in an ipython (or Jupyter) environment</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.infer_compression">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">infer_compression</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#infer_compression"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.infer_compression" title="Permalink to this definition">¶</a></dt>
<dd><p>Infers compression for a file from its suffix.  For example, given “/tmp/hello.gz”, this will return “gzip”
&gt;&gt;&gt; infer_compression(“/tmp/hello.gz”)
‘gzip’
&gt;&gt;&gt; infer_compression(“/tmp/abc.txt”) is None
True</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.infer_frequency">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">infer_frequency</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#infer_frequency"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.infer_frequency" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns most common frequency of date differences as a fraction of days
:type timestamps: <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>
:param timestamps: A numpy array of monotonically increasing datetime64</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">timestamps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;2018-01-01 11:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-01 11:15:00&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-01 11:30:00&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-01 11:35:00&#39;</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;M8[ns]&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">infer_frequency</span><span class="p">(</span><span class="n">timestamps</span><span class="p">),</span> <span class="mi">8</span><span class="p">))</span>
<span class="go">0.01041667</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.is_newer">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">is_newer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#is_newer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.is_newer" title="Permalink to this definition">¶</a></dt>
<dd><p>whether filename ctime (modfication time) is newer than ref_filename or either file does not exist
&gt;&gt;&gt; import time
&gt;&gt;&gt; import tempfile
&gt;&gt;&gt; temp_dir = tempfile.gettempdir()
&gt;&gt;&gt; touch(f’{temp_dir}/x.txt’)
&gt;&gt;&gt; time.sleep(0.1)
&gt;&gt;&gt; touch(f’{temp_dir}/y.txt’)
&gt;&gt;&gt; is_newer(f’{temp_dir}/y.txt’, f’{temp_dir}/x.txt’)
True
&gt;&gt;&gt; touch(f’{temp_dir}/y.txt’)
&gt;&gt;&gt; time.sleep(0.1)
&gt;&gt;&gt; touch(f’{temp_dir}/x.txt’)
&gt;&gt;&gt; is_newer(f’{temp_dir}/y.txt’, f’{temp_dir}/x.txt’)
False</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.linear_interpolate">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">linear_interpolate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#linear_interpolate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.linear_interpolate" title="Permalink to this definition">¶</a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">linear_interpolate</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mf">8.9</span><span class="p">)</span> <span class="o">==</span> <span class="mf">3.45</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">linear_interpolate</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mf">8.9</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">linear_interpolate</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mf">8.9</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">linear_interpolate</span><span class="p">(</span>
<span class="gp">... </span>   <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">3.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">]),</span>
<span class="gp">... </span>   <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">4.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">]),</span>
<span class="gp">... </span>   <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">8.</span><span class="p">,</span> <span class="mf">8.</span><span class="p">]),</span>
<span class="gp">... </span>   <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mf">8.</span><span class="p">]),</span>
<span class="gp">... </span>   <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">8.9</span><span class="p">,</span> <span class="mf">8.</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">3.45</span><span class="p">,</span> <span class="mf">3.</span><span class="p">])))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.millis_since_epoch">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">millis_since_epoch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dt</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#millis_since_epoch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.millis_since_epoch" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a python datetime, return number of milliseconds between the unix epoch and the datetime.
Returns a float since it can contain fractions of milliseconds as well
&gt;&gt;&gt; millis_since_epoch(datetime.datetime(2018, 1, 1))
1514764800000.0</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.monotonically_increasing">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">monotonically_increasing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#monotonically_increasing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.monotonically_increasing" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the array is monotonically_increasing, False otherwise</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">monotonically_increasing</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;2018-01-02&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-03&#39;</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;M8[D]&#39;</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">monotonically_increasing</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;2018-01-02&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-02&#39;</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;M8[D]&#39;</span><span class="p">))</span>
<span class="go">False</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.nan_to_zero">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">nan_to_zero</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#nan_to_zero"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.nan_to_zero" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts any nans in a numpy float array to 0</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.np_bucket">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">np_bucket</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buckets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">side</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mid'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#np_bucket"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.np_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a numpy array and a sorted list of buckets, assign each element to a bucket.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>np.ndarray</em>) – The numpy array of values</p></li>
<li><p><strong>buckets</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]) – (list) List of buckets</p></li>
<li><p><strong>default_value</strong> – Used when we cannot assign an element to any bucket if side is ‘left’ or ‘right’</p></li>
<li><p><strong>side</strong> (<em>str</em>) – If set to mid, we use the midpoint between buckets to assign elements
‘left’, assignment &lt;= element
‘right’, assignment &gt;= element
Default: ‘mid’</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>np.ndarray of same length as a</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buckets</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">alltrue</span><span class="p">(</span><span class="n">np_bucket</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">buckets</span><span class="p">,</span> <span class="n">side</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span>  <span class="mi">4</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>  <span class="mi">4</span><span class="p">,</span>  <span class="mi">8</span><span class="p">,</span>  <span class="mi">4</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">alltrue</span><span class="p">(</span><span class="n">np_bucket</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">buckets</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">side</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span>  <span class="mi">8</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span>  <span class="mi">4</span><span class="p">,</span>  <span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span>  <span class="mi">4</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">alltrue</span><span class="p">(</span><span class="n">np_bucket</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">buckets</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span>  <span class="mi">4</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span>  <span class="mi">4</span><span class="p">,</span>  <span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span>  <span class="mi">4</span><span class="p">])))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.np_find_closest">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">np_find_closest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#np_find_closest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.np_find_closest" title="Permalink to this definition">¶</a></dt>
<dd><p>From <a class="reference external" href="https://stackoverflow.com/questions/8914491/finding-the-nearest-value-and-return-the-index-of-array-in-python">https://stackoverflow.com/questions/8914491/finding-the-nearest-value-and-return-the-index-of-array-in-python</a>
Find index of closest value to array v in array a.  Returns an array of the same size as v
a must be sorted
&gt;&gt;&gt; assert(all(np_find_closest(np.array([3, 4, 6]), np.array([4, 2])) == np.array([1, 0])))</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.np_get_index">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">np_get_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#np_get_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.np_get_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Get index of a value in a numpy array.  Returns -1 if the value does not exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.np_inc_dates">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">np_inc_dates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_days</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#np_inc_dates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.np_inc_dates" title="Permalink to this definition">¶</a></dt>
<dd><p>Increment the given date array so each cell gets the next higher value in this array
&gt;&gt;&gt; dates = np.array([‘2021-06-01’, ‘2021-06-01’, ‘2021-08-01’, ‘2021-04-01’], dtype=’M8[D]’)
&gt;&gt;&gt; check = np.array([dates[2], dates[2], np.datetime64(‘nat’), dates[0]])
&gt;&gt;&gt; assert np.array_equal(np_inc_dates(dates, 1),
…    np.array([‘2021-08-01’, ‘2021-08-01’, ‘NaT’, ‘2021-06-01’], dtype=’M8[D]’), equal_nan=True)
&gt;&gt;&gt; assert np.array_equal(np_inc_dates(dates, 2),
…    np.array([‘NaT’, ‘NaT’, ‘NaT’, ‘2021-08-01’], dtype=’M8[D]’), equal_nan=True)
&gt;&gt;&gt; assert np.array_equal(np_inc_dates(dates, -1),
…    np.array([‘2021-04-01’, ‘2021-04-01’, ‘2021-06-01’, ‘NaT’], dtype=’M8[D]’), equal_nan=True)
&gt;&gt;&gt; assert np.array_equal(np_inc_dates(dates, -2),
…    np.array([‘NaT’, ‘NaT’, ‘2021-04-01’, ‘NaT’], dtype=’M8[D]’), equal_nan=True)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.np_parse_array">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">np_parse_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'float'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#np_parse_array"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.np_parse_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a 1 or 2 d numpy array from a string that looks like:
[[2. 5. 3. 0. 0.]</p>
<blockquote>
<div><p>[3. 5. 0. 4. 3.]]</p>
</div></blockquote>
<p>or
[2. 5. 3. 0. 8.]</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np_parse_array</span><span class="p">(</span><span class="s1">&#39;[[2. 5. 3. 0. 0.]</span><span class="se">\n</span><span class="s1"> [3. 5. 0. 4. 3.]]&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">2.</span><span class="p">,</span> <span class="mf">5.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">3.</span><span class="p">,</span> <span class="mf">5.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">4.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">]]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np_parse_array</span><span class="p">(</span><span class="s1">&#39;[3 4. 5]&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mf">4.</span><span class="p">,</span> <span class="mi">5</span><span class="p">]))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.np_rolling_window">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">np_rolling_window</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#np_rolling_window"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.np_rolling_window" title="Permalink to this definition">¶</a></dt>
<dd><p>For applying rolling window functions to a numpy array
See: <a class="reference external" href="https://stackoverflow.com/questions/6811183/rolling-window-for-1d-arrays-in-numpy">https://stackoverflow.com/questions/6811183/rolling-window-for-1d-arrays-in-numpy</a>
&gt;&gt;&gt; print(np.std(np_rolling_window(np.array([1, 2, 3, 4]), 2), 1))
[0.5 0.5 0.5]</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.np_round">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">np_round</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clip</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#np_round"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.np_round" title="Permalink to this definition">¶</a></dt>
<dd><p>Round all elements in an array to the nearest clip</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – array with elements to round</p></li>
<li><p><strong>clip</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – rounding value</p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np_round</span><span class="p">(</span><span class="mf">15.8</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">)</span>
<span class="go">15.75</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.np_uniques">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">np_uniques</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arrays</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#np_uniques"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.np_uniques" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of numpy arrays that may have different datatype, generate a structured numpy
array with sorted, unique elements from that list
&gt;&gt;&gt; array1 = np.array([‘2018-01-02’, ‘2018-01-03’, ‘2018-01-02’, ‘2018-01-03’], dtype=’M8[D]’)
&gt;&gt;&gt; array2 = np.array([‘P’, ‘P’, ‘P’, ‘C’])
&gt;&gt;&gt; x = np_uniques([array1, array2])
&gt;&gt;&gt; assert len(x) == 3
&gt;&gt;&gt; assert x[0][0] == np.datetime64(‘2018-01-02’)
&gt;&gt;&gt; assert x[0][1] ==  ‘P’</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.percentile_of_score">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">percentile_of_score</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#percentile_of_score"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.percentile_of_score" title="Permalink to this definition">¶</a></dt>
<dd><p>For each element in a, find the percentile of a its in.  From stackoverflow.com/a/29989971/5351549
Like scipy.stats.percentileofscore but runs in O(n log(n)) time.
&gt;&gt;&gt; a = np.array([4, 3, 1, 2, 4.1])
&gt;&gt;&gt; percentiles = percentile_of_score(a)
&gt;&gt;&gt; assert(all(np.isclose(np.array([ 75.,  50.,   0.,  25., 100.]), percentiles)))</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.remove_dups">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">remove_dups</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#remove_dups"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.remove_dups" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove duplicates from a list
:type lst: <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]
:param lst: list to remove duplicates from
:type key_func: <code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]]
:param key_func: A function that takes a list element and converts it to a key for detecting dups</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">MutableSequence</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list with duplicates removed.  This is stable in the sense that original list elements will retain their order</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">remove_dups</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]))</span>
<span class="go">[&#39;a&#39;, &#39;d&#39;, &#39;c&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">remove_dups</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">]))</span>
<span class="go">[&#39;a&#39;, &#39;d&#39;, &#39;A&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">remove_dups</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">],</span> <span class="n">key_func</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">upper</span><span class="p">()))</span>
<span class="go">[&#39;a&#39;, &#39;d&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.resample_trade_bars">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">resample_trade_bars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampling_frequency</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resample_funcs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#resample_trade_bars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.resample_trade_bars" title="Permalink to this definition">¶</a></dt>
<dd><p>Downsample trade bars using sampling frequency</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pd.DataFrame</em>) – Must contain an index of numpy datetime64 type which is monotonically increasing</p></li>
<li><p><strong>sampling_frequency</strong> (<em>str</em>) – See pandas frequency strings</p></li>
<li><p><strong>str</strong> (<em>resample_funcs</em><em> (</em><em>dict of</em>) – int): a dictionary of column name -&gt; resampling function for any columns that are custom defined.  Default None.
If there is no entry for a custom column, defaults to ‘last’ for that column</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Resampled dataframe</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">math</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;2018-01-08 15:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-09 13:30:00&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-09 15:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-11 15:00:00&#39;</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;M8[ns]&#39;</span><span class="p">),</span>
<span class="gp">... </span>         <span class="s1">&#39;o&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">8.9</span><span class="p">,</span> <span class="mf">9.1</span><span class="p">,</span> <span class="mf">9.3</span><span class="p">,</span> <span class="mf">8.6</span><span class="p">]),</span>
<span class="gp">... </span>         <span class="s1">&#39;h&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">9.0</span><span class="p">,</span> <span class="mf">9.3</span><span class="p">,</span> <span class="mf">9.4</span><span class="p">,</span> <span class="mf">8.7</span><span class="p">]),</span>
<span class="gp">... </span>         <span class="s1">&#39;l&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">8.8</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">,</span> <span class="mf">9.2</span><span class="p">,</span> <span class="mf">8.4</span><span class="p">]),</span>
<span class="gp">... </span>         <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">8.95</span><span class="p">,</span> <span class="mf">9.2</span><span class="p">,</span> <span class="mf">9.35</span><span class="p">,</span> <span class="mf">8.5</span><span class="p">]),</span>
<span class="gp">... </span>         <span class="s1">&#39;v&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">300</span><span class="p">]),</span>
<span class="gp">... </span>         <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">300</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">400</span><span class="p">])</span>
<span class="gp">... </span>        <span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;vwap&#39;</span><span class="p">]</span> <span class="o">=</span>  <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">l</span> <span class="o">+</span> <span class="n">df</span><span class="o">.</span><span class="n">h</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">resample_trade_bars</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">sampling_frequency</span> <span class="o">=</span> <span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="n">resample_funcs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">df</span><span class="p">,</span>
<span class="gp">... </span>  <span class="n">sampling_frequency</span><span class="p">:</span> <span class="n">df</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="n">sampling_frequency</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">vwap</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">9.24</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">vwap</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">l</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="mf">8.4</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.resample_ts">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">resample_ts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampling_frequency</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#resample_ts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.resample_ts" title="Permalink to this definition">¶</a></dt>
<dd><p>Downsample a tuple of datetimes and value arrays using sampling frequency, using the last value if it does not exist at the bin edge.
See pandas.Series.resample</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dates</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – a numpy datetime64 array</p></li>
<li><p><strong>values</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – a numpy array</p></li>
<li><p><strong>sampling_frequency</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – See pandas frequency strings</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Resampled tuple of datetime and value arrays</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.resample_vwap">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">resample_vwap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampling_frequency</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#resample_vwap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.resample_vwap" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute weighted average of vwap given higher frequency vwap and volume</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.series_to_array">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">series_to_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#series_to_array"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.series_to_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a pandas series to a numpy array.  If the object is not a pandas Series return it back unchanged</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.set_defaults">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">set_defaults</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_float_sf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_display_max_rows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_display_max_columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">99</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">np_seterr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'raise'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mpl_figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(8,</span> <span class="pre">6)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">jupyter_multiple_display</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#set_defaults"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.set_defaults" title="Permalink to this definition">¶</a></dt>
<dd><p>Set some display defaults to make it easier to view dataframes and graphs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df_float_sf</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Number of significant figures to show in dataframes (default 4). Set to None to use pandas defaults</p></li>
<li><p><strong>df_display_max_rows</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Number of rows to display for pandas dataframes when you print them (default 200).  Set to None to use pandas defaults</p></li>
<li><p><strong>df_display_max_columns</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Number of columns to display for pandas dataframes when you print them (default 99).  Set to None to use pandas defaults</p></li>
<li><p><strong>np_seterr</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Error mode for numpy warnings.  See numpy seterr function for details.  Set to None to use numpy defaults</p></li>
<li><p><strong>mpl_figsize</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – Default figure size to use when displaying matplotlib plots (default 8,6).  Set to None to use defaults</p></li>
<li><p><strong>jupyter_multiple_display</strong> – If set, and you have multiple outputs in a Jupyter cell, output will contain all of them. Default True</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.set_ipython_defaults">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">set_ipython_defaults</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">jupyter_multiple_display</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#set_ipython_defaults"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.set_ipython_defaults" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.shift_np">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">shift_np</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#shift_np"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.shift_np" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to pandas.Series.shift but works on numpy arrays.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – The numpy array to shift</p></li>
<li><p><strong>n</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Number of places to shift, can be positive or negative</p></li>
<li><p><strong>fill_value</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]) – After shifting, there will be empty slots left in the array.  If set, fill these with fill_value.
If fill_value is set to None (default), we will fill these with False for boolean arrays, np.nan for floats</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.str2date">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">str2date</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#str2date"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.str2date" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a string like “2008-01-15 15:00:00” to a numpy datetime64.  If s is not a string, return s back</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.strtup2date">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">strtup2date</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tup</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#strtup2date"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.strtup2date" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a string tuple like (“2008-01-15”, “2009-01-16”) to a numpy datetime64 tuple.
If the tuple does not contain strings, return it back unchanged</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.to_csv">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">to_csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#to_csv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.to_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a temporary file then renames to the permanent file so we don’t have half written files.
Also optionally compresses using the xz algorithm</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.touch">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">touch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">438</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dir_fd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#touch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.touch" title="Permalink to this definition">¶</a></dt>
<dd><p>replicate unix touch command, i.e create file if it doesn’t exist, otherwise update timestamp</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_utils.zero_to_nan">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_utils.</span></span><span class="sig-name descname"><span class="pre">zero_to_nan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#zero_to_nan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_utils.zero_to_nan" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts any zeros in a numpy array to nans</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="pyqstrat-pq-types-module">
<h2>pyqstrat.pq_types module<a class="headerlink" href="#pyqstrat-pq-types-module" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Contract">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_types.</span></span><span class="sig-name descname"><span class="pre">Contract</span></span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#Contract"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.Contract" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Contract.clear">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#Contract.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.Contract.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>When running Python interactively you may create a Contract with a given symbol multiple times because you don’t restart Python
therefore global variables are not cleared.  This function clears global Contracts</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Contract.contract_group">
<span class="sig-name descname"><span class="pre">contract_group</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><span class="pre">ContractGroup</span></a></em><a class="headerlink" href="#pyqstrat.pq_types.Contract.contract_group" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Contract.contracts_by_symbol">
<span class="sig-name descname"><span class="pre">contracts_by_symbol</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#pyqstrat.pq_types.Contract" title="pyqstrat.pq_types.Contract"><span class="pre">Contract</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pyqstrat.pq_types.Contract.contracts_by_symbol" title="Permalink to this definition">¶</a></dt>
<dd><p>A contract such as a stock, option or a future that can be traded</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Contract.create">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">symbol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contract_group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expiry</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multiplier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#Contract.create"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.Contract.create" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symbol</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – A unique string reprenting this contract. e.g IBM or ESH9</p></li>
<li><p><strong>contract_group</strong> (<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>) – We sometimes need to group contracts for calculating PNL, for example, you may have a strategy
which has 3 legs, a long option, a short option and a future or equity used to hedge delta.  In this case, you will be trading
different symbols over time as options and futures expire, but you may want to track PNL for each leg using a contract group for each leg.
So you could create contract groups ‘Long Option’, ‘Short Option’ and ‘Hedge’ and assign contracts to these.</p></li>
<li><p><strong>expiry</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – In the case of a future or option, the date and time when the
contract expires.  For equities and other non expiring contracts, set this to None.  Default None.</p></li>
<li><p><strong>multiplier</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – If the market price convention is per unit, and the unit is not the same as contract size,
set the multiplier here. For example, for E-mini contracts, each contract is 50 units and the price is per unit,
so multiplier would be 50.  Default 1</p></li>
<li><p><strong>properties</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>]) – Any data you want to store with this contract.
For example, you may want to store option strike.  Default None</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#pyqstrat.pq_types.Contract" title="pyqstrat.pq_types.Contract"><code class="xref py py-class docutils literal notranslate"><span class="pre">Contract</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Contract.expiry">
<span class="sig-name descname"><span class="pre">expiry</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">datetime64</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pyqstrat.pq_types.Contract.expiry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Contract.multiplier">
<span class="sig-name descname"><span class="pre">multiplier</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#pyqstrat.pq_types.Contract.multiplier" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Contract.properties">
<span class="sig-name descname"><span class="pre">properties</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">SimpleNamespace</span></em><a class="headerlink" href="#pyqstrat.pq_types.Contract.properties" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Contract.symbol">
<span class="sig-name descname"><span class="pre">symbol</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#pyqstrat.pq_types.Contract.symbol" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.pq_types.ContractGroup">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_types.</span></span><span class="sig-name descname"><span class="pre">ContractGroup</span></span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#ContractGroup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.ContractGroup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A way to group contracts for figuring out which indicators, rules and signals to apply to a contract and for PNL reporting</p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.pq_types.ContractGroup.add_contract">
<span class="sig-name descname"><span class="pre">add_contract</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#ContractGroup.add_contract"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.ContractGroup.add_contract" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.pq_types.ContractGroup.clear">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#ContractGroup.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.ContractGroup.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>When running Python interactively you may create a ContractGroup with a given name multiple times because you don’t restart Python
therefore global variables are not cleared.  This function clears global ContractGroups</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.ContractGroup.contracts">
<span class="sig-name descname"><span class="pre">contracts</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">MutableSet</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pyqstrat.pq_types.Contract" title="pyqstrat.pq_types.Contract"><span class="pre">Contract</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pyqstrat.pq_types.ContractGroup.contracts" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.ContractGroup.contracts_by_symbol">
<span class="sig-name descname"><span class="pre">contracts_by_symbol</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#pyqstrat.pq_types.Contract" title="pyqstrat.pq_types.Contract"><span class="pre">Contract</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pyqstrat.pq_types.ContractGroup.contracts_by_symbol" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.pq_types.ContractGroup.create">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#ContractGroup.create"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.ContractGroup.create" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – Name of the group</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.pq_types.ContractGroup.get_contract">
<span class="sig-name descname"><span class="pre">get_contract</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">symbol</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#ContractGroup.get_contract"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.ContractGroup.get_contract" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.ContractGroup.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#pyqstrat.pq_types.ContractGroup.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.pq_types.LimitOrder">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_types.</span></span><span class="sig-name descname"><span class="pre">LimitOrder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qty</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason_code</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'none'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'open'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#LimitOrder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.LimitOrder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pq_types.Order" title="pyqstrat.pq_types.Order"><code class="xref py py-class docutils literal notranslate"><span class="pre">Order</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.pq_types.LimitOrder.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qty</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason_code</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'none'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'open'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#LimitOrder.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.LimitOrder.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contract</strong> (<a class="reference internal" href="#pyqstrat.pq_types.Contract" title="pyqstrat.pq_types.Contract"><code class="xref py py-class docutils literal notranslate"><span class="pre">Contract</span></code></a>) – The contract this order is for</p></li>
<li><p><strong>timestamp</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>) – Time the order was placed</p></li>
<li><p><strong>qty</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Number of contracts or shares.  Use a negative quantity for sell orders</p></li>
<li><p><strong>limit_price</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Limit price (float)</p></li>
<li><p><strong>reason_code</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The reason this order was created.
Prefer a predefined constant from the ReasonCode class if it matches your reason for creating this order.
Default None</p></li>
<li><p><strong>properties</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>]) – Any order specific data we want to store.  Default None</p></li>
<li><p><strong>status</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Status of the order, “open”, “filled”, etc. (default “open”)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.pq_types.MarketOrder">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_types.</span></span><span class="sig-name descname"><span class="pre">MarketOrder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qty</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason_code</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'none'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'open'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#MarketOrder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.MarketOrder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pq_types.Order" title="pyqstrat.pq_types.Order"><code class="xref py py-class docutils literal notranslate"><span class="pre">Order</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.pq_types.MarketOrder.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qty</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason_code</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'none'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'open'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#MarketOrder.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.MarketOrder.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contract</strong> (<a class="reference internal" href="#pyqstrat.pq_types.Contract" title="pyqstrat.pq_types.Contract"><code class="xref py py-class docutils literal notranslate"><span class="pre">Contract</span></code></a>) – The contract this order is for</p></li>
<li><p><strong>timestamp</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>) – Time the order was placed</p></li>
<li><p><strong>qty</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Number of contracts or shares.  Use a negative quantity for sell orders</p></li>
<li><p><strong>reason_code</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The reason this order was created.
Prefer a predefined constant from the ReasonCode class if it matches your reason for creating this order.
Default None</p></li>
<li><p><strong>properties</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>]) – Any order specific data we want to store.  Default None</p></li>
<li><p><strong>status</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Status of the order, “open”, “filled”, etc. Default “open”</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Order">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_types.</span></span><span class="sig-name descname"><span class="pre">Order</span></span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#Order"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.Order" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.pq_types.OrderStatus">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_types.</span></span><span class="sig-name descname"><span class="pre">OrderStatus</span></span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#OrderStatus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.OrderStatus" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Enum for order status</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.OrderStatus.FILLED">
<span class="sig-name descname"><span class="pre">FILLED</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'filled'</span></em><a class="headerlink" href="#pyqstrat.pq_types.OrderStatus.FILLED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.OrderStatus.OPEN">
<span class="sig-name descname"><span class="pre">OPEN</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'open'</span></em><a class="headerlink" href="#pyqstrat.pq_types.OrderStatus.OPEN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Price">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_types.</span></span><span class="sig-name descname"><span class="pre">Price</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bid_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ask_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#Price"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.Price" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">price</span> <span class="o">=</span> <span class="n">Price</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="mf">15.25</span><span class="p">,</span> <span class="mf">15.75</span><span class="p">,</span> <span class="mi">189</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">price</span><span class="p">)</span>
<span class="go">15.25@189/15.75@300</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">price</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="n">SimpleNamespace</span><span class="p">(</span><span class="n">delta</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">price</span><span class="o">.</span><span class="n">valid</span> <span class="o">=</span> <span class="kc">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">price</span><span class="p">)</span>
<span class="go">15.25@189/15.75@300 delta: -0.3 invalid</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">price</span><span class="o">.</span><span class="n">mid</span><span class="p">())</span>
<span class="go">15.5</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Price.ask">
<span class="sig-name descname"><span class="pre">ask</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#pyqstrat.pq_types.Price.ask" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Price.ask_size">
<span class="sig-name descname"><span class="pre">ask_size</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#pyqstrat.pq_types.Price.ask_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Price.bid">
<span class="sig-name descname"><span class="pre">bid</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#pyqstrat.pq_types.Price.bid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Price.bid_size">
<span class="sig-name descname"><span class="pre">bid_size</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#pyqstrat.pq_types.Price.bid_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Price.invalid">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">invalid</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#Price.invalid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.Price.invalid" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#pyqstrat.pq_types.Price" title="pyqstrat.pq_types.Price"><code class="xref py py-class docutils literal notranslate"><span class="pre">Price</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Price.mid">
<span class="sig-name descname"><span class="pre">mid</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#Price.mid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.Price.mid" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Price.properties">
<span class="sig-name descname"><span class="pre">properties</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">SimpleNamespace</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#pyqstrat.pq_types.Price.properties" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Price.set_property">
<span class="sig-name descname"><span class="pre">set_property</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#Price.set_property"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.Price.set_property" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Price.spread">
<span class="sig-name descname"><span class="pre">spread</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#Price.spread"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.Price.spread" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Price.timestamp">
<span class="sig-name descname"><span class="pre">timestamp</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">datetime</span></em><a class="headerlink" href="#pyqstrat.pq_types.Price.timestamp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Price.valid">
<span class="sig-name descname"><span class="pre">valid</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#pyqstrat.pq_types.Price.valid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Price.vw_mid">
<span class="sig-name descname"><span class="pre">vw_mid</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#Price.vw_mid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.Price.vw_mid" title="Permalink to this definition">¶</a></dt>
<dd><p>Volume weighted mid
&gt;&gt;&gt; price = Price(datetime.datetime(2020, 1, 1), 15.25, 15.75, 189, 300)
&gt;&gt;&gt; print(f’{price.vw_mid():.4f}’)
15.4433
&gt;&gt;&gt; price.bid_size = 0
&gt;&gt;&gt; price.ask_size = 0
&gt;&gt;&gt; assert math.isnan(price.vw_mid())</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.pq_types.ReasonCode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_types.</span></span><span class="sig-name descname"><span class="pre">ReasonCode</span></span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#ReasonCode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.ReasonCode" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class containing constants for predefined order reason codes. Prefer these predefined reason codes if they suit
the reason you are creating your order.  Otherwise, use your own string.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.ReasonCode.BACKTEST_END">
<span class="sig-name descname"><span class="pre">BACKTEST_END</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'backtest</span> <span class="pre">end'</span></em><a class="headerlink" href="#pyqstrat.pq_types.ReasonCode.BACKTEST_END" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.ReasonCode.ENTER_LONG">
<span class="sig-name descname"><span class="pre">ENTER_LONG</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'enter</span> <span class="pre">long'</span></em><a class="headerlink" href="#pyqstrat.pq_types.ReasonCode.ENTER_LONG" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.ReasonCode.ENTER_SHORT">
<span class="sig-name descname"><span class="pre">ENTER_SHORT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'enter</span> <span class="pre">short'</span></em><a class="headerlink" href="#pyqstrat.pq_types.ReasonCode.ENTER_SHORT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.ReasonCode.EXIT_LONG">
<span class="sig-name descname"><span class="pre">EXIT_LONG</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'exit</span> <span class="pre">long'</span></em><a class="headerlink" href="#pyqstrat.pq_types.ReasonCode.EXIT_LONG" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.ReasonCode.EXIT_SHORT">
<span class="sig-name descname"><span class="pre">EXIT_SHORT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'exit</span> <span class="pre">short'</span></em><a class="headerlink" href="#pyqstrat.pq_types.ReasonCode.EXIT_SHORT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.ReasonCode.MARKER_PROPERTIES">
<span class="sig-name descname"><span class="pre">MARKER_PROPERTIES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'backtest</span> <span class="pre">end':</span> <span class="pre">{'color':</span> <span class="pre">'green',</span> <span class="pre">'size':</span> <span class="pre">50,</span> <span class="pre">'symbol':</span> <span class="pre">'*'},</span> <span class="pre">'enter</span> <span class="pre">long':</span> <span class="pre">{'color':</span> <span class="pre">'blue',</span> <span class="pre">'size':</span> <span class="pre">50,</span> <span class="pre">'symbol':</span> <span class="pre">'P'},</span> <span class="pre">'enter</span> <span class="pre">short':</span> <span class="pre">{'color':</span> <span class="pre">'red',</span> <span class="pre">'size':</span> <span class="pre">50,</span> <span class="pre">'symbol':</span> <span class="pre">'P'},</span> <span class="pre">'exit</span> <span class="pre">long':</span> <span class="pre">{'color':</span> <span class="pre">'blue',</span> <span class="pre">'size':</span> <span class="pre">50,</span> <span class="pre">'symbol':</span> <span class="pre">'X'},</span> <span class="pre">'exit</span> <span class="pre">short':</span> <span class="pre">{'color':</span> <span class="pre">'red',</span> <span class="pre">'size':</span> <span class="pre">50,</span> <span class="pre">'symbol':</span> <span class="pre">'X'},</span> <span class="pre">'none':</span> <span class="pre">{'color':</span> <span class="pre">'green',</span> <span class="pre">'size':</span> <span class="pre">50,</span> <span class="pre">'symbol':</span> <span class="pre">'o'},</span> <span class="pre">'roll</span> <span class="pre">future':</span> <span class="pre">{'color':</span> <span class="pre">'green',</span> <span class="pre">'size':</span> <span class="pre">50,</span> <span class="pre">'symbol':</span> <span class="pre">'&gt;'}}</span></em><a class="headerlink" href="#pyqstrat.pq_types.ReasonCode.MARKER_PROPERTIES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.ReasonCode.NONE">
<span class="sig-name descname"><span class="pre">NONE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'none'</span></em><a class="headerlink" href="#pyqstrat.pq_types.ReasonCode.NONE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.ReasonCode.ROLL_FUTURE">
<span class="sig-name descname"><span class="pre">ROLL_FUTURE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'roll</span> <span class="pre">future'</span></em><a class="headerlink" href="#pyqstrat.pq_types.ReasonCode.ROLL_FUTURE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.pq_types.RollOrder">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_types.</span></span><span class="sig-name descname"><span class="pre">RollOrder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">close_qty</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reopen_qty</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason_code</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'roll</span> <span class="pre">future'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'open'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#RollOrder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.RollOrder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pq_types.Order" title="pyqstrat.pq_types.Order"><code class="xref py py-class docutils literal notranslate"><span class="pre">Order</span></code></a></p>
<p>A roll order is used to roll a future from one series to the next.  It represents a sell of one future and the buying of another future.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.pq_types.RollOrder.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">close_qty</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reopen_qty</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason_code</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'roll</span> <span class="pre">future'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'open'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#RollOrder.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.RollOrder.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contract</strong> (<a class="reference internal" href="#pyqstrat.pq_types.Contract" title="pyqstrat.pq_types.Contract"><code class="xref py py-class docutils literal notranslate"><span class="pre">Contract</span></code></a>) – The contract this order is for</p></li>
<li><p><strong>timestamp</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>) – Time the order was placed</p></li>
<li><p><strong>close_qty</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Quantity of the future you are rolling</p></li>
<li><p><strong>reopen_qty</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Quantity of the future you are rolling to</p></li>
<li><p><strong>reason_code</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The reason this order was created.
Prefer a predefined constant from the ReasonCode class if it matches your reason for creating this order.
Default None</p></li>
<li><p><strong>properties</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>]) – Any order specific data we want to store.  Default None</p></li>
<li><p><strong>status</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Status of the order, “open”, “filled”, etc. (default “open”)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.pq_types.RoundTripTrade">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_types.</span></span><span class="sig-name descname"><span class="pre">RoundTripTrade</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry_order</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exit_order</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry_timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exit_timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qty</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exit_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry_reason</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exit_reason</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry_commission</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exit_commission</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry_properties</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exit_properties</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">net_pnl</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#RoundTripTrade"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.RoundTripTrade" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.RoundTripTrade.contract">
<span class="sig-name descname"><span class="pre">contract</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pyqstrat.pq_types.Contract" title="pyqstrat.pq_types.Contract"><span class="pre">Contract</span></a></em><a class="headerlink" href="#pyqstrat.pq_types.RoundTripTrade.contract" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.RoundTripTrade.entry_commission">
<span class="sig-name descname"><span class="pre">entry_commission</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#pyqstrat.pq_types.RoundTripTrade.entry_commission" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.RoundTripTrade.entry_order">
<span class="sig-name descname"><span class="pre">entry_order</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pyqstrat.pq_types.Order" title="pyqstrat.pq_types.Order"><span class="pre">Order</span></a></em><a class="headerlink" href="#pyqstrat.pq_types.RoundTripTrade.entry_order" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.RoundTripTrade.entry_price">
<span class="sig-name descname"><span class="pre">entry_price</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#pyqstrat.pq_types.RoundTripTrade.entry_price" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.RoundTripTrade.entry_properties">
<span class="sig-name descname"><span class="pre">entry_properties</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">SimpleNamespace</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pyqstrat.pq_types.RoundTripTrade.entry_properties" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.RoundTripTrade.entry_reason">
<span class="sig-name descname"><span class="pre">entry_reason</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#pyqstrat.pq_types.RoundTripTrade.entry_reason" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.RoundTripTrade.entry_timestamp">
<span class="sig-name descname"><span class="pre">entry_timestamp</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">datetime64</span></em><a class="headerlink" href="#pyqstrat.pq_types.RoundTripTrade.entry_timestamp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.RoundTripTrade.exit_commission">
<span class="sig-name descname"><span class="pre">exit_commission</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#pyqstrat.pq_types.RoundTripTrade.exit_commission" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.RoundTripTrade.exit_order">
<span class="sig-name descname"><span class="pre">exit_order</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pyqstrat.pq_types.Order" title="pyqstrat.pq_types.Order"><span class="pre">Order</span></a></em><a class="headerlink" href="#pyqstrat.pq_types.RoundTripTrade.exit_order" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.RoundTripTrade.exit_price">
<span class="sig-name descname"><span class="pre">exit_price</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#pyqstrat.pq_types.RoundTripTrade.exit_price" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.RoundTripTrade.exit_properties">
<span class="sig-name descname"><span class="pre">exit_properties</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">SimpleNamespace</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pyqstrat.pq_types.RoundTripTrade.exit_properties" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.RoundTripTrade.exit_reason">
<span class="sig-name descname"><span class="pre">exit_reason</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#pyqstrat.pq_types.RoundTripTrade.exit_reason" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.RoundTripTrade.exit_timestamp">
<span class="sig-name descname"><span class="pre">exit_timestamp</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">datetime64</span></em><a class="headerlink" href="#pyqstrat.pq_types.RoundTripTrade.exit_timestamp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.RoundTripTrade.net_pnl">
<span class="sig-name descname"><span class="pre">net_pnl</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#pyqstrat.pq_types.RoundTripTrade.net_pnl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.pq_types.RoundTripTrade.qty">
<span class="sig-name descname"><span class="pre">qty</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#pyqstrat.pq_types.RoundTripTrade.qty" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.pq_types.StopLimitOrder">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_types.</span></span><span class="sig-name descname"><span class="pre">StopLimitOrder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qty</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trigger_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit_price</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">nan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason_code</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'none'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'open'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#StopLimitOrder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.StopLimitOrder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pq_types.Order" title="pyqstrat.pq_types.Order"><code class="xref py py-class docutils literal notranslate"><span class="pre">Order</span></code></a></p>
<p>Used for stop loss or stop limit orders.  The order is triggered when price goes above or below trigger price, depending on whether this is a short
or long order.  Becomes either a market or limit order at that point, depending on whether you set the limit price or not.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.pq_types.StopLimitOrder.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qty</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trigger_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit_price</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">nan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason_code</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'none'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'open'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#StopLimitOrder.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.StopLimitOrder.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contract</strong> (<a class="reference internal" href="#pyqstrat.pq_types.Contract" title="pyqstrat.pq_types.Contract"><code class="xref py py-class docutils literal notranslate"><span class="pre">Contract</span></code></a>) – The contract this order is for</p></li>
<li><p><strong>timestamp</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>) – Time the order was placed</p></li>
<li><p><strong>qty</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Number of contracts or shares.  Use a negative quantity for sell orders</p></li>
<li><p><strong>trigger_price</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Order becomes a market or limit order if price crosses trigger_price.</p></li>
<li><p><strong>limit_price</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – If not set (default), order becomes a market order when price crosses trigger price.
Otherwise it becomes a limit order.  Default np.nan</p></li>
<li><p><strong>reason_code</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The reason this order was created.
Prefer a predefined constant from the ReasonCode class if it matches your reason for creating this order.
Default None</p></li>
<li><p><strong>properties</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>]) – Any order specific data we want to store.  Default None</p></li>
<li><p><strong>status</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Status of the order, “open”, “filled”, etc. (default “open”)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Trade">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_types.</span></span><span class="sig-name descname"><span class="pre">Trade</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qty</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fee</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commission</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#Trade"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.Trade" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.pq_types.Trade.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qty</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fee</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commission</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#Trade.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_types.Trade.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contract</strong> (<a class="reference internal" href="#pyqstrat.pq_types.Contract" title="pyqstrat.pq_types.Contract"><code class="xref py py-class docutils literal notranslate"><span class="pre">Contract</span></code></a>) – The contract we traded</p></li>
<li><p><strong>order</strong> (<a class="reference internal" href="#pyqstrat.pq_types.Order" title="pyqstrat.pq_types.Order"><code class="xref py py-class docutils literal notranslate"><span class="pre">Order</span></code></a>) – A reference to the order that created this trade. Default None</p></li>
<li><p><strong>timestamp</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>) – Trade execution datetime</p></li>
<li><p><strong>qty</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Number of contracts or shares filled</p></li>
<li><p><strong>price</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Trade price</p></li>
<li><p><strong>fee</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Fees paid to brokers or others. Default 0</p></li>
<li><p><strong>commision</strong> – Commission paid to brokers or others. Default 0</p></li>
<li><p><strong>properties</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>]) – Any data you want to store with this contract.
For example, you may want to store bid / ask prices at time of trade.  Default None</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<hr class="docutils" />
<span class="target" id="module-pyqstrat.pq_io"></span><dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_io.df_to_hdf5">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_io.</span></span><span class="sig-name descname"><span class="pre">df_to_hdf5</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtypes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimize_vlen_str</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_io.html#df_to_hdf5"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_io.df_to_hdf5" title="Permalink to this definition">¶</a></dt>
<dd><p>Write out a pandas dataframe to hdf5 using the np_arrays_to_hdf5 function</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_io.hdf5_to_df">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_io.</span></span><span class="sig-name descname"><span class="pre">hdf5_to_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_io.html#hdf5_to_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_io.hdf5_to_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a pandas dataframe previously written out using df_to_hdf5 or np_arrays_to_hdf5</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_io.hdf5_to_np_arrays">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_io.</span></span><span class="sig-name descname"><span class="pre">hdf5_to_np_arrays</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_io.html#hdf5_to_np_arrays"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_io.hdf5_to_np_arrays" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a list of numpy arrays previously written out by np_arrays_to_hdf5
:type filename: <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>
:param filename: path of the hdf5 file to read
:type key: <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>
:param key: group and or / subgroups to read from.  For example, “g1/g2” will read from the subgrp g2 within the grp g1</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of numpy arrays along with their names</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_io.np_arrays_to_hdf5">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_io.</span></span><span class="sig-name descname"><span class="pre">np_arrays_to_hdf5</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtypes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimize_vlen_str</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compression_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_io.html#np_arrays_to_hdf5"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_io.np_arrays_to_hdf5" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a list of numpy arrays to hdf5
:type data: <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]
:param data: List of numpy one dimensional arrays along with the name of the array
:type filename: <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>
:param filename: filename of the hdf5 file
:type key: <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>
:param key: group and or / subgroups to write to.  For example, “g1/g2” will write to the subgrp g2 within the grp g1
:type dtypes: <code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]
:param dtypes: dict used to override datatype for a column.  For example, {“col1”: “f4”} will write a 4 byte float array for col1
:type optimize_vlen_str: <code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>
:param optimize_vlen_str: if set, for every variable length string array, i.e dtype = ‘O’, we try to find the maximum string length</p>
<blockquote>
<div><p>and if it is &lt; 100, we write out fixed length strings instead of variable length. This is much faster to read and process</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>compression_args</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]]) – if you want to compress the hdf5 file. You can use the hdf5plugin module and arguments such as hdf5plugin.Blosc()</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pq_io.test_hdf5_to_df">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pq_io.</span></span><span class="sig-name descname"><span class="pre">test_hdf5_to_df</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_io.html#test_hdf5_to_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.pq_io.test_hdf5_to_df" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-pyqstrat.holiday_calendars">
<span id="pyqstrat-holiday-calendars-module"></span><h2>pyqstrat.holiday_calendars module<a class="headerlink" href="#module-pyqstrat.holiday_calendars" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.holiday_calendars.Calendar">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.holiday_calendars.</span></span><span class="sig-name descname"><span class="pre">Calendar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">holidays</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/holiday_calendars.html#Calendar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.holiday_calendars.Calendar" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.holiday_calendars.Calendar.EUREX">
<span class="sig-name descname"><span class="pre">EUREX</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'eurex'</span></em><a class="headerlink" href="#pyqstrat.holiday_calendars.Calendar.EUREX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.holiday_calendars.Calendar.NYSE">
<span class="sig-name descname"><span class="pre">NYSE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'nyse'</span></em><a class="headerlink" href="#pyqstrat.holiday_calendars.Calendar.NYSE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.holiday_calendars.Calendar.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">holidays</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/holiday_calendars.html#Calendar.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.holiday_calendars.Calendar.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Do not use this function directly.  Use Calendar.get_calendar instead
:type holidays: <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>
:param holidays: holidays for this calendar, excluding weekends
:type holidays: np.array of datetime64[D]</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.holiday_calendars.Calendar.add_calendar">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_calendar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exchange_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">holidays</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/holiday_calendars.html#Calendar.add_calendar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.holiday_calendars.Calendar.add_calendar" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a trading calendar to the class level calendars dict</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>exchange_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name of the exchange.</p></li>
<li><p><strong>holidays</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – holidays for this exchange, excluding weekends</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.holiday_calendars.Calendar.add_trading_days">
<span class="sig-name descname"><span class="pre">add_trading_days</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_days</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roll</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'raise'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/holiday_calendars.html#Calendar.add_trading_days"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.holiday_calendars.Calendar.add_trading_days" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds trading days to a start date</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">date</span></code>]) – start datetimes(s)</p></li>
<li><p><strong>num_days</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – number of trading days to add</p></li>
<li><p><strong>roll</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – one of ‘raise’, ‘nat’, ‘forward’, ‘following’, ‘backward’, ‘preceding’, ‘modifiedfollowing’, ‘modifiedpreceding’ or ‘allow’}
‘allow’ is a special case in which case, adding 1 day to a holiday will act as if it was not a holiday, and give you the next business day’
The rest of the values are the same as in the numpy busday_offset function
From numpy documentation:
How to treat dates that do not fall on a valid day. The default is ‘raise’.
‘raise’ means to raise an exception for an invalid day.
‘nat’ means to return a NaT (not-a-time) for an invalid day.
‘forward’ and ‘following’ mean to take the first valid day later in time.
‘backward’ and ‘preceding’ mean to take the first valid day earlier in time.
‘modifiedfollowing’ means to take the first valid day later in time unless it is across a Month boundary,
in which case to take the first valid day earlier in time.
‘modifiedpreceding’ means to take the first valid day earlier in time unless it is across a Month boundary,
in which case to take the first valid day later in time.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The datetime num_days trading days after start</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">calendar</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="n">get_calendar</span><span class="p">(</span><span class="n">Calendar</span><span class="o">.</span><span class="n">NYSE</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calendar</span><span class="o">.</span><span class="n">add_trading_days</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">24</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">numpy.datetime64(&#39;2015-12-28&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calendar</span><span class="o">.</span><span class="n">add_trading_days</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2017-04-15&#39;</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">roll</span> <span class="o">=</span> <span class="s1">&#39;preceding&#39;</span><span class="p">)</span> <span class="c1"># 4/14/2017 is a Friday and a holiday</span>
<span class="go">numpy.datetime64(&#39;2017-04-13&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calendar</span><span class="o">.</span><span class="n">add_trading_days</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2017-04-08&#39;</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">roll</span> <span class="o">=</span> <span class="s1">&#39;preceding&#39;</span><span class="p">)</span> <span class="c1"># 4/7/2017 is a Friday and not a holiday</span>
<span class="go">numpy.datetime64(&#39;2017-04-07&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calendar</span><span class="o">.</span><span class="n">add_trading_days</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2019-02-17 15:25&#39;</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">roll</span> <span class="o">=</span> <span class="s1">&#39;allow&#39;</span><span class="p">)</span>
<span class="go">numpy.datetime64(&#39;2019-02-19T15:25&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calendar</span><span class="o">.</span><span class="n">add_trading_days</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2019-02-17 15:25&#39;</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">roll</span> <span class="o">=</span> <span class="s1">&#39;allow&#39;</span><span class="p">)</span>
<span class="go">numpy.datetime64(&#39;2019-02-15T15:25&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.holiday_calendars.Calendar.get_calendar">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_calendar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exchange_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/holiday_calendars.html#Calendar.get_calendar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.holiday_calendars.Calendar.get_calendar" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a calendar object for the given exchange:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>exchange_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The exchange for which you want a calendar.  Calendar.NYSE, Calendar.EUREX are predefined.</p></li>
<li><p><strong>calendar</strong> (<em>If you want to add a new</em>) – </p></li>
<li><p><strong>function</strong> (<em>use the add_calendar class level</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#pyqstrat.holiday_calendars.Calendar" title="pyqstrat.holiday_calendars.Calendar"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calendar</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The calendar object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.holiday_calendars.Calendar.get_trading_days">
<span class="sig-name descname"><span class="pre">get_trading_days</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_first</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_last</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/holiday_calendars.html#Calendar.get_trading_days"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.holiday_calendars.Calendar.get_trading_days" title="Permalink to this definition">¶</a></dt>
<dd><p>Get back a list of numpy dates that are trading days between the start and end</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nyse</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="n">get_calendar</span><span class="p">(</span><span class="n">Calendar</span><span class="o">.</span><span class="n">NYSE</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nyse</span><span class="o">.</span><span class="n">get_trading_days</span><span class="p">(</span><span class="s1">&#39;2005-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2005-01-08&#39;</span><span class="p">)</span>
<span class="go">array([&#39;2005-01-03&#39;, &#39;2005-01-04&#39;, &#39;2005-01-05&#39;, &#39;2005-01-06&#39;, &#39;2005-01-07&#39;], dtype=&#39;datetime64[D]&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nyse</span><span class="o">.</span><span class="n">get_trading_days</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2005</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2005</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">array([&#39;2005-01-03&#39;, &#39;2005-01-04&#39;, &#39;2005-01-05&#39;, &#39;2005-01-06&#39;,</span>
<span class="go">       &#39;2005-01-07&#39;, &#39;2005-01-10&#39;, &#39;2005-01-11&#39;, &#39;2005-01-12&#39;,</span>
<span class="go">       &#39;2005-01-13&#39;, &#39;2005-01-14&#39;, &#39;2005-01-18&#39;, &#39;2005-01-19&#39;,</span>
<span class="go">       &#39;2005-01-20&#39;, &#39;2005-01-21&#39;, &#39;2005-01-24&#39;, &#39;2005-01-25&#39;,</span>
<span class="go">       &#39;2005-01-26&#39;, &#39;2005-01-27&#39;, &#39;2005-01-28&#39;, &#39;2005-01-31&#39;, &#39;2005-02-01&#39;], dtype=&#39;datetime64[D]&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nyse</span><span class="o">.</span><span class="n">get_trading_days</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">29</span><span class="p">),</span> <span class="n">include_last</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="go">array([&#39;2016-01-06&#39;, &#39;2016-01-07&#39;, &#39;2016-01-08&#39;, &#39;2016-01-11&#39;,</span>
<span class="go">       &#39;2016-01-12&#39;, &#39;2016-01-13&#39;, &#39;2016-01-14&#39;, &#39;2016-01-15&#39;,</span>
<span class="go">       &#39;2016-01-19&#39;, &#39;2016-01-20&#39;, &#39;2016-01-21&#39;, &#39;2016-01-22&#39;,</span>
<span class="go">       &#39;2016-01-25&#39;, &#39;2016-01-26&#39;, &#39;2016-01-27&#39;, &#39;2016-01-28&#39;], dtype=&#39;datetime64[D]&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nyse</span><span class="o">.</span><span class="n">get_trading_days</span><span class="p">(</span><span class="s1">&#39;2017-07-04&#39;</span><span class="p">,</span> <span class="s1">&#39;2017-07-08&#39;</span><span class="p">,</span> <span class="n">include_first</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="go">array([&#39;2017-07-05&#39;, &#39;2017-07-06&#39;, &#39;2017-07-07&#39;], dtype=&#39;datetime64[D]&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nyse</span><span class="o">.</span><span class="n">get_trading_days</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2017-07-04&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2017-07-08&#39;</span><span class="p">),</span> <span class="n">include_first</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="go">array([&#39;2017-07-05&#39;, &#39;2017-07-06&#39;, &#39;2017-07-07&#39;], dtype=&#39;datetime64[D]&#39;)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.holiday_calendars.Calendar.is_trading_day">
<span class="sig-name descname"><span class="pre">is_trading_day</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dates</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/holiday_calendars.html#Calendar.is_trading_day"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.holiday_calendars.Calendar.is_trading_day" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns whether the date is not a holiday or a weekend</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dates</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">date</span></code>]) – date times to check</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Whether this date is a trading day</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eurex</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="n">get_calendar</span><span class="p">(</span><span class="n">Calendar</span><span class="o">.</span><span class="n">EUREX</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eurex</span><span class="o">.</span><span class="n">is_trading_day</span><span class="p">(</span><span class="s1">&#39;2016-12-25&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eurex</span><span class="o">.</span><span class="n">is_trading_day</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">22</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nyse</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="n">get_calendar</span><span class="p">(</span><span class="n">Calendar</span><span class="o">.</span><span class="n">NYSE</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nyse</span><span class="o">.</span><span class="n">is_trading_day</span><span class="p">(</span><span class="s1">&#39;2017-04-01&#39;</span><span class="p">)</span> <span class="c1"># Weekend</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nyse</span><span class="o">.</span><span class="n">is_trading_day</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="s1">&#39;2017-04-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2017-04-09&#39;</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">))</span> 
<span class="go">array([False, False,  True,  True,  True,  True,  True, False]...)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.holiday_calendars.Calendar.num_trading_days">
<span class="sig-name descname"><span class="pre">num_trading_days</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_first</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_last</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/holiday_calendars.html#Calendar.num_trading_days"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.holiday_calendars.Calendar.num_trading_days" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of trading days between two date series including those two dates</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">eurex</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="n">get_calendar</span><span class="p">(</span><span class="n">Calendar</span><span class="o">.</span><span class="n">EUREX</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eurex</span><span class="o">.</span><span class="n">num_trading_days</span><span class="p">(</span><span class="s1">&#39;2009-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2011-12-31&#39;</span><span class="p">)</span>
<span class="go">772.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dates</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;20130101&#39;</span><span class="p">,</span><span class="n">periods</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">increments</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">29</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="n">category</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">PerformanceWarning</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dates2</span> <span class="o">=</span> <span class="n">dates</span> <span class="o">+</span> <span class="n">increments</span> <span class="o">*</span> <span class="n">dates</span><span class="o">.</span><span class="n">freq</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">dates</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span> <span class="p">:</span> <span class="n">dates2</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">6</span><span class="p">][</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nyse</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="n">get_calendar</span><span class="p">(</span><span class="n">Calendar</span><span class="o">.</span><span class="n">NYSE</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">formatter</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;float&#39;</span> <span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s1">.1f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">})</span>  <span class="c1"># After numpy 1.13 positive floats don&#39;t have a leading space for sign</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">nyse</span><span class="o">.</span><span class="n">num_trading_days</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
<span class="go">[3.0 0.0 1.0 5.0 nan 8.0 nan 20.0]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.holiday_calendars.Calendar.third_friday_of_month">
<span class="sig-name descname"><span class="pre">third_friday_of_month</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">month</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roll</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'backward'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/holiday_calendars.html#Calendar.third_friday_of_month"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.holiday_calendars.Calendar.third_friday_of_month" title="Permalink to this definition">¶</a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nyse</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="n">get_calendar</span><span class="p">(</span><span class="n">Calendar</span><span class="o">.</span><span class="n">NYSE</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nyse</span><span class="o">.</span><span class="n">third_friday_of_month</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2017</span><span class="p">)</span>
<span class="go">numpy.datetime64(&#39;2017-03-17&#39;)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.holiday_calendars.get_date_from_weekday">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.holiday_calendars.</span></span><span class="sig-name descname"><span class="pre">get_date_from_weekday</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weekday</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">week</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/holiday_calendars.html#get_date_from_weekday"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.holiday_calendars.get_date_from_weekday" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the date that falls on a given weekday (Monday = 0) on a week, year and month
&gt;&gt;&gt; get_date_from_weekday(1, 2019, 10, 4)
numpy.datetime64(‘2019-10-22’)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.holiday_calendars.read_holidays">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.holiday_calendars.</span></span><span class="sig-name descname"><span class="pre">read_holidays</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">calendar_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dirname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/holiday_calendars.html#read_holidays"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.holiday_calendars.read_holidays" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a csv with a holidays column containing holidays (not including weekends)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-pyqstrat.account">
<span id="pyqstrat-account-module"></span><h2>pyqstrat.account module<a class="headerlink" href="#module-pyqstrat.account" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.account.Account">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.account.</span></span><span class="sig-name descname"><span class="pre">Account</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract_groups</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">price_function</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strategy_context</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starting_equity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000000.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pnl_calc_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">900</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.Account" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An Account calculates pnl for a set of contracts</p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.account.Account.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract_groups</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">price_function</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strategy_context</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starting_equity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000000.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pnl_calc_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">900</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.Account.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contract_groups</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>]) – Contract groups that we want to compute PNL for</p></li>
<li><p><strong>timestamps</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – Timestamps that we might compute PNL at</p></li>
<li><p><strong>price_function</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<a class="reference internal" href="#pyqstrat.pq_types.Contract" title="pyqstrat.pq_types.Contract"><code class="xref py py-class docutils literal notranslate"><span class="pre">Contract</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – Function that returns contract prices used to compute pnl</p></li>
<li><p><strong>strategy_context</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>) – This is passed into the price function so we can use current state of strategy to compute prices</p></li>
<li><p><strong>starting_equity</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Starting equity in account currency.  Default 1.e6</p></li>
<li><p><strong>pnl_calc_time</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Number of minutes past midnight that we should calculate PNL at.  Default 15 * 60, i.e. 3 pm</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.account.Account.add_trades">
<span class="sig-name descname"><span class="pre">add_trades</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trades</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account.add_trades"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.Account.add_trades" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.account.Account.calc">
<span class="sig-name descname"><span class="pre">calc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account.calc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.Account.calc" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes P&amp;L and stores it internally for all contracts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timestamp</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>) – timestamp to compute P&amp;L at.  Account remembers the last timestamp it computed P&amp;L up to and will compute P&amp;L
between these and including timestamp. If there is more than one day between the last index and current index, we will
include pnl for at the defined pnl_calc_time for those dates as well.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.account.Account.df_account_pnl">
<span class="sig-name descname"><span class="pre">df_account_pnl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract_group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account.df_account_pnl"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.Account.df_account_pnl" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns PNL at the account level.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>contract_group</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>]) – If set, we only return pnl for this contract_group.  Otherwise we return pnl for all contract groups</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.account.Account.df_pnl">
<span class="sig-name descname"><span class="pre">df_pnl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract_groups</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account.df_pnl"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.Account.df_pnl" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dataframe with P&amp;L columns broken down by contract group and symbol</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>contract_group</strong> – Return PNL for this contract group.  If None (default), include all contract groups</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.account.Account.df_roundtrip_trades">
<span class="sig-name descname"><span class="pre">df_roundtrip_trades</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract_group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account.df_roundtrip_trades"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.Account.df_roundtrip_trades" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dataframe of round trip trades</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contract_group</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>]) – Return trades for this contract group. If None (default), include all contract groups</p></li>
<li><p><strong>start_date</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>]) – Include trades with date greater than or equal to this timestamp.</p></li>
<li><p><strong>end_date</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>]) – Include trades with date less than or equal to this timestamp.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.account.Account.df_trades">
<span class="sig-name descname"><span class="pre">df_trades</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract_group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account.df_trades"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.Account.df_trades" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dataframe of trades</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contract_group</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>]) – Return trades for this contract group. If None (default), include all contract groups</p></li>
<li><p><strong>start_date</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>]) – Include trades with date greater than or equal to this timestamp.</p></li>
<li><p><strong>end_date</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>]) – Include trades with date less than or equal to this timestamp.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.account.Account.equity">
<span class="sig-name descname"><span class="pre">equity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account.equity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.Account.equity" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns equity in this account in Account currency.  Will cause calculation if Account has not previously
calculated up to this date</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.account.Account.position">
<span class="sig-name descname"><span class="pre">position</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract_group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account.position"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.Account.position" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns netted position for a contract_group at a given date in number of contracts or shares.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.account.Account.positions">
<span class="sig-name descname"><span class="pre">positions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract_group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account.positions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.Account.positions" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all non-zero positions in a contract group</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">MutableSequence</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.Contract" title="pyqstrat.pq_types.Contract"><code class="xref py py-class docutils literal notranslate"><span class="pre">Contract</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.account.Account.roundtrip_trades">
<span class="sig-name descname"><span class="pre">roundtrip_trades</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract_group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account.roundtrip_trades"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.Account.roundtrip_trades" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of round trip trades with the given symbol and with trade date
between (and including) start date and end date if they are specified.
If symbol is None trades for all symbols are returned</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">MutableSequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.RoundTripTrade" title="pyqstrat.pq_types.RoundTripTrade"><code class="xref py py-class docutils literal notranslate"><span class="pre">RoundTripTrade</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.account.Account.symbols">
<span class="sig-name descname"><span class="pre">symbols</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account.symbols"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.Account.symbols" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">MutableSequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.account.Account.trades">
<span class="sig-name descname"><span class="pre">trades</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract_group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account.trades"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.Account.trades" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of trades with the given symbol and with trade date between (and including) start date
and end date if they are specified. If symbol is None trades for all symbols are returned</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">MutableSequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.Trade" title="pyqstrat.pq_types.Trade"><code class="xref py py-class docutils literal notranslate"><span class="pre">Trade</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.account.ContractPNL">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.account.</span></span><span class="sig-name descname"><span class="pre">ContractPNL</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account_timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">price_function</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strategy_context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#ContractPNL"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.ContractPNL" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Computes pnl for a single contract over time given trades and market data
&gt;&gt;&gt; from pyqstrat.pq_types import MarketOrder
&gt;&gt;&gt; ContractGroup.clear()
&gt;&gt;&gt; Contract.clear()
&gt;&gt;&gt; aapl_cg = ContractGroup.create(‘AAPL’)
&gt;&gt;&gt; aapl_contract = Contract.create(‘AAPL’, contract_group=aapl_cg)
&gt;&gt;&gt; timestamps = np.arange(np.datetime64(‘2018-01-01’), np.datetime64(‘2018-01-04’))
&gt;&gt;&gt; def get_price(contract, timestamps, idx, strategy_context):
…    assert contract.symbol == ‘AAPL’, f’unknown contract: {contract}’
…    return idx + 10.1</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contract_pnl</span> <span class="o">=</span> <span class="n">ContractPNL</span><span class="p">(</span><span class="n">aapl_contract</span><span class="p">,</span> <span class="n">timestamps</span><span class="p">,</span> <span class="n">get_price</span><span class="p">,</span> <span class="n">SimpleNamespace</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trade_5</span> <span class="o">=</span> <span class="n">Trade</span><span class="p">(</span><span class="n">aapl_contract</span><span class="p">,</span> <span class="n">MarketOrder</span><span class="p">(</span><span class="n">aapl_contract</span><span class="p">,</span> <span class="n">timestamps</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">20</span><span class="p">),</span> <span class="n">timestamps</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">10</span><span class="p">,</span> <span class="mf">16.2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trade_6</span> <span class="o">=</span> <span class="n">Trade</span><span class="p">(</span><span class="n">aapl_contract</span><span class="p">,</span> <span class="n">MarketOrder</span><span class="p">(</span><span class="n">aapl_contract</span><span class="p">,</span> <span class="n">timestamps</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="o">-</span><span class="mi">20</span><span class="p">),</span> <span class="n">timestamps</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mf">16.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trade_7</span> <span class="o">=</span> <span class="n">Trade</span><span class="p">(</span><span class="n">aapl_contract</span><span class="p">,</span> <span class="n">MarketOrder</span><span class="p">(</span><span class="n">aapl_contract</span><span class="p">,</span> <span class="n">timestamps</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="o">-</span><span class="mi">20</span><span class="p">),</span> <span class="n">timestamps</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mf">16.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contract_pnl</span><span class="o">.</span><span class="n">_add_trades</span><span class="p">([</span><span class="n">trade_5</span><span class="p">,</span> <span class="n">trade_6</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contract_pnl</span><span class="o">.</span><span class="n">_add_trades</span><span class="p">([</span><span class="n">trade_7</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">contract_pnl</span><span class="o">.</span><span class="n">df</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span> <span class="o">==</span> <span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">row</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">row</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="s1">&#39;AAPL&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2018-01-03 00:00:00&#39;</span><span class="p">),</span>
<span class="gp">... </span><span class="s1">&#39;position&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;price&#39;</span><span class="p">:</span> <span class="mf">12.1</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;unrealized&#39;</span><span class="p">:</span> <span class="mf">44.0</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;realized&#39;</span><span class="p">:</span> <span class="mf">3.000000000000007</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;commission&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;fee&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;net_pnl&#39;</span><span class="p">:</span> <span class="mf">47.00000000000001</span><span class="p">}</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.account.ContractPNL.calc_net_pnl">
<span class="sig-name descname"><span class="pre">calc_net_pnl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#ContractPNL.calc_net_pnl"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.ContractPNL.calc_net_pnl" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.account.ContractPNL.df">
<span class="sig-name descname"><span class="pre">df</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#ContractPNL.df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.ContractPNL.df" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a pandas dataframe with pnl data</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.account.ContractPNL.net_pnl">
<span class="sig-name descname"><span class="pre">net_pnl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#ContractPNL.net_pnl"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.ContractPNL.net_pnl" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.account.ContractPNL.pnl">
<span class="sig-name descname"><span class="pre">pnl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#ContractPNL.pnl"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.ContractPNL.pnl" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.account.ContractPNL.position">
<span class="sig-name descname"><span class="pre">position</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#ContractPNL.position"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.ContractPNL.position" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.account.calc_trade_pnl">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.account.</span></span><span class="sig-name descname"><span class="pre">calc_trade_pnl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">open_qtys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">open_prices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_qtys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_prices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multiplier</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#calc_trade_pnl"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.calc_trade_pnl" title="Permalink to this definition">¶</a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">calc_trade_pnl</span><span class="p">(</span>
<span class="gp">... </span>         <span class="n">open_qtys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">float</span><span class="p">),</span> <span class="n">open_prices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">float</span><span class="p">),</span>
<span class="gp">... </span>           <span class="n">new_qtys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">]),</span> <span class="n">new_prices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">6</span><span class="p">]),</span> <span class="n">multiplier</span> <span class="o">=</span> <span class="mi">100</span><span class="p">))</span>
<span class="go">(array([-3.]), array([6.]), -3.0, 6.0, -1300.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">calc_trade_pnl</span><span class="p">(</span><span class="n">open_qtys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">float</span><span class="p">),</span> <span class="n">open_prices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">float</span><span class="p">),</span> <span class="n">new_qtys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">]),</span>
<span class="gp">... </span>         <span class="n">new_prices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">51</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">45</span><span class="p">]),</span> <span class="n">multiplier</span> <span class="o">=</span> <span class="mi">100</span><span class="p">))</span>
<span class="go">(array([8.]), array([50.]), 8.0, 50.0, -2800.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">calc_trade_pnl</span><span class="p">(</span><span class="n">open_qtys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]),</span> <span class="n">open_prices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]),</span>
<span class="gp">... </span>               <span class="n">new_qtys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">58</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">39</span><span class="p">]),</span>
<span class="gp">... </span>               <span class="n">new_prices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2080</span><span class="p">,</span> <span class="mf">2075.25</span><span class="p">,</span> <span class="mf">2070.75</span><span class="p">,</span> <span class="mi">2076</span><span class="p">,</span> <span class="mf">2066.75</span><span class="p">,</span> <span class="mf">2069.25</span><span class="p">,</span> <span class="mf">2074.75</span><span class="p">,</span> <span class="mf">2069.75</span><span class="p">,</span> <span class="mf">2087.25</span><span class="p">,</span> <span class="mf">2097.25</span><span class="p">,</span> <span class="mi">2106</span><span class="p">,</span> <span class="mf">2088.25</span><span class="p">,</span> <span class="mf">2085.25</span><span class="p">]),</span>
<span class="gp">... </span>               <span class="n">multiplier</span> <span class="o">=</span> <span class="mi">50</span><span class="p">))</span>
<span class="go">(array([], dtype=float64), array([], dtype=float64), 0.0, 0, -33762.5)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.account.find_index_before">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.account.</span></span><span class="sig-name descname"><span class="pre">find_index_before</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sorted_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#find_index_before"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.find_index_before" title="Permalink to this definition">¶</a></dt>
<dd><p>Find index of the first key in a sorted dict that is less than or equal to the key passed in.
If the key is less than the first key in the dict, return -1</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.account.find_last_non_nan_index">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.account.</span></span><span class="sig-name descname"><span class="pre">find_last_non_nan_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#find_last_non_nan_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.find_last_non_nan_index" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.account.leading_nan_to_zero">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.account.</span></span><span class="sig-name descname"><span class="pre">leading_nan_to_zero</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#leading_nan_to_zero"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.leading_nan_to_zero" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.account.test_account">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.account.</span></span><span class="sig-name descname"><span class="pre">test_account</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#test_account"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.account.test_account" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-pyqstrat.strategy">
<span id="pyqstrat-strategy-module"></span><h2>pyqstrat.strategy module<a class="headerlink" href="#module-pyqstrat.strategy" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.strategy.Strategy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.strategy.</span></span><span class="sig-name descname"><span class="pre">Strategy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contract_groups</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">price_function</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starting_equity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000000.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pnl_calc_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">901</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trade_lag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_final_calc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strategy_context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.strategy.Strategy.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contract_groups</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">price_function</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starting_equity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000000.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pnl_calc_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">901</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trade_lag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_final_calc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strategy_context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamps</strong> (<em>np.array of np.datetime64</em>) – The “heartbeat” of the strategy.  We will evaluate trading rules and
simulate the market at these times.</p></li>
<li><p><strong>contract_groups</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>]) – The contract groups we will potentially trade.</p></li>
<li><p><strong>price_function</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<a class="reference internal" href="#pyqstrat.pq_types.Contract" title="pyqstrat.pq_types.Contract"><code class="xref py py-class docutils literal notranslate"><span class="pre">Contract</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – A function that returns the price of a contract at a given timestamp</p></li>
<li><p><strong>starting_equity</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Starting equity in Strategy currency.  Default 1.e6</p></li>
<li><p><strong>pnl_calc_time</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Time of day used to calculate PNL.  Default 15 * 60 (3 pm)</p></li>
<li><p><strong>trade_lag</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Number of bars you want between the order and the trade.  For example, if you think it will take
5 seconds to place your order in the market, and your bar size is 1 second, set this to 5.  Set this to 0 if you
want to execute your trade at the same time as you place the order, for example, if you have daily bars.  Default 0.</p></li>
<li><p><strong>run_final_calc</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If set, calculates unrealized pnl and net pnl as well as realized pnl when strategy is done.
If you don’t need unrealized pnl, turn this off for faster run time. Default True</p></li>
<li><p><strong>strategy_context</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>]) – A storage class where you can store key / value pairs relevant to this strategy.
For example, you may have a pre-computed table of correlations that you use in the indicator or trade rule functions.
If not set, the __init__ function will create an empty member strategy_context object that you can access.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.strategy.Strategy.add_indicator">
<span class="sig-name descname"><span class="pre">add_indicator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indicator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contract_groups</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depends_on</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.add_indicator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.add_indicator" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name of the indicator</p></li>
<li><p><strong>indicator</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]) – A function that takes strategy timestamps and other indicators and returns a numpy array
containing indicator values.  The return array must have the same length as the timestamps object.
Can also be a numpy array or a pandas Series in which case we just store the values.</p></li>
<li><p><strong>contract_groups</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>]]) – Contract groups that this indicator applies to.  If not set, it applies to all contract groups. Default None.</p></li>
<li><p><strong>depends_on</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – Names of other indicators that we need to compute this indicator. Default None.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.strategy.Strategy.add_market_sim">
<span class="sig-name descname"><span class="pre">add_market_sim</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">market_sim_function</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.add_market_sim"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.add_market_sim" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a market simulator.  A market simulator is a function that takes orders as input and returns trades.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.strategy.Strategy.add_rule">
<span class="sig-name descname"><span class="pre">add_rule</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rule_function</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signal_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sig_true_values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.add_rule"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.add_rule" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Add a trading rule.  Trading rules are guaranteed to run in the order in which you add them.  For example, if you set trade_lag to 0,</dt><dd><p>and want to exit positions and re-enter new ones in the same bar, make sure you add the exit rule before you add the entry rule to the
strategy.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name of the trading rule</p></li>
<li><p><strong>rule_function</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <a class="reference internal" href="#pyqstrat.account.Account" title="pyqstrat.account.Account"><code class="xref py py-class docutils literal notranslate"><span class="pre">Account</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.Order" title="pyqstrat.pq_types.Order"><code class="xref py py-class docutils literal notranslate"><span class="pre">Order</span></code></a>]]) – A trading rule function that returns a list of Orders</p></li>
<li><p><strong>signal_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The strategy will call the trading rule function when the signal with this name matches sig_true_values</p></li>
<li><p><strong>sig_true_values</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>]) – If the signal value at a bar is equal to one of these values,
the Strategy will call the trading rule function.  Default [TRUE]</p></li>
<li><p><strong>position_filter</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Can be “zero”, “nonzero” or None.  Zero rules are only triggered when the corresponding contract positions are 0
Nonzero rules are only triggered when the corresponding contract positions are non-zero.
If not set, we don’t look at position before triggering the rule. Default None</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.strategy.Strategy.add_signal">
<span class="sig-name descname"><span class="pre">add_signal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signal_function</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contract_groups</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depends_on_indicators</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depends_on_signals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.add_signal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.add_signal" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Name of the signal</p></li>
<li><p><strong>signal_function</strong> (<em>function</em>) – A function that takes timestamps and a dictionary of indicator value arrays and
returns a numpy array
containing signal values.  The return array must have the same length as the input timestamps</p></li>
<li><p><strong>contract_groups</strong> (list of <code class="xref py py-obj docutils literal notranslate"><span class="pre">ContractGroup</span></code>, optional) – Contract groups that this signal applies to.
If not set, it applies to all contract groups.  Default None.</p></li>
<li><p><strong>depends_on_indicators</strong> (<em>list of str</em><em>, </em><em>optional</em>) – Names of indicators that we need to compute this signal. Default None.</p></li>
<li><p><strong>depends_on_signals</strong> (<em>list of str</em><em>, </em><em>optional</em>) – Names of other signals that we need to compute this signal. Default None.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.strategy.Strategy.df_data">
<span class="sig-name descname"><span class="pre">df_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract_groups</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_pnl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.df_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.df_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Add indicators and signals to end of market data and return as a pandas dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contract_groups</strong> (list of:obj:<cite>ContractGroup</cite>, optional) – list of contract groups to include.  All if set to None (default)</p></li>
<li><p><strong>add_pnl</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If True (default), include P&amp;L columns in dataframe</p></li>
<li><p><strong>start_date</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – string or numpy datetime64. Default None</p></li>
<li><p><strong>end_date</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – string or numpy datetime64: Default None</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.strategy.Strategy.df_orders">
<span class="sig-name descname"><span class="pre">df_orders</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract_group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.df_orders"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.df_orders" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dataframe with data from orders with the given contract group and with order date between (and including)
start date and end date
if they are specified. If contract_group is None orders for all contract_groups are returned</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.strategy.Strategy.df_pnl">
<span class="sig-name descname"><span class="pre">df_pnl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract_group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.df_pnl"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.df_pnl" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dataframe with P&amp;L columns.  If contract group is set to None (default), sums up P&amp;L across all contract groups</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.strategy.Strategy.df_returns">
<span class="sig-name descname"><span class="pre">df_returns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract_group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampling_frequency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'D'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.df_returns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.df_returns" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dataframe of returns and equity indexed by date.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contract_group</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>]) – The contract group to get returns for.
If set to None (default), we return the sum of PNL for all contract groups</p></li>
<li><p><strong>sampling_frequency</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Downsampling frequency.  Default is None.  See pandas frequency strings for possible values</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.strategy.Strategy.df_roundtrip_trades">
<span class="sig-name descname"><span class="pre">df_roundtrip_trades</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract_group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.df_roundtrip_trades"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.df_roundtrip_trades" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dataframe of round trip trades with the given contract group and with trade date
between (and including) start date and end date if they are specified. If contract_group is None trades for all
contract_groups are returned</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.strategy.Strategy.df_trades">
<span class="sig-name descname"><span class="pre">df_trades</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract_group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.df_trades"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.df_trades" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dataframe with data from trades with the given contract group and with trade date between (and including)
start date and end date
if they are specified. If contract_group is None trades for all contract_groups are returned</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.strategy.Strategy.evaluate_returns">
<span class="sig-name descname"><span class="pre">evaluate_returns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract_group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_summary</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">float_precision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_metrics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.evaluate_returns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.evaluate_returns" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary of common return metrics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contract_group</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">ContractGroup</span></code>, optional) – Contract group to evaluate or None (default) for all contract groups</p></li>
<li><p><strong>plot</strong> (<em>bool</em>) – If set to True, display plots of equity, drawdowns and returns.  Default False</p></li>
<li><p><strong>float_precision</strong> (<em>float</em><em>, </em><em>optional</em>) – Number of significant figures to show in returns.  Default 4</p></li>
<li><p><strong>return_metrics</strong> (<em>bool</em><em>, </em><em>optional</em>) – If set, we return the computed metrics as a dictionary</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.strategy.Strategy.orders">
<span class="sig-name descname"><span class="pre">orders</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract_group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.orders"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.orders" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of orders with the given contract group and with order date between (and including) start date and
end date if they are specified.
If contract_group is None orders for all contract_groups are returned</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.Order" title="pyqstrat.pq_types.Order"><code class="xref py py-class docutils literal notranslate"><span class="pre">Order</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.strategy.Strategy.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract_groups</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">primary_indicators</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">primary_indicators_dual_axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">secondary_indicators</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">secondary_indicators_dual_axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indicator_properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signal_properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pnl_columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(20,</span> <span class="pre">15)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_date_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampling_frequency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trade_marker_properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hspace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.15</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot indicators, signals, trades, position, pnl</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contract_groups</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>]]) – Contract groups to plot or None (default) for all contract groups.</p></li>
<li><p><strong>indicators</strong> (<em>primary</em>) – List of indicators to plot in the main indicator section. Default None (plot everything)</p></li>
<li><p><strong>indicators</strong> – List of indicators to plot in the secondary indicator section. Default None (don’t plot anything)</p></li>
<li><p><strong>indicator_properties</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]]]) – If set, we use the line color, line type indicated for the given indicators</p></li>
<li><p><strong>signals</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – Signals to plot.  Default None (plot everything).</p></li>
<li><p><strong>plot_equity</strong> – If set, we plot the equity curve.  Default is True</p></li>
<li><p><strong>title</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Title of plot. Default None</p></li>
<li><p><strong>figsize</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – Figure size.  Default (20, 15)</p></li>
<li><p><strong>date_range</strong> – Used to restrict the date range of the graph. Default None</p></li>
<li><p><strong>date_format</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Date format for tick labels on x axis.  If set to None (default), will be selected based on date range.
See matplotlib date format strings</p></li>
<li><p><strong>sampling_frequency</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Downsampling frequency.  The graph may get too busy if you have too many bars of data,
so you may want to downsample before plotting.  See pandas frequency strings for possible values. Default None.</p></li>
<li><p><strong>trade_marker_properties</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]]]) – A dictionary of order reason code -&gt; marker shape, marker size, marker color for plotting trades
with different reason codes. By default we use the dictionary from the <code class="xref py py-obj docutils literal notranslate"><span class="pre">ReasonCode</span></code> class</p></li>
<li><p><strong>hspace</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Height (vertical) space between subplots.  Default is 0.15</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.strategy.Strategy.plot_returns">
<span class="sig-name descname"><span class="pre">plot_returns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract_group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.plot_returns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.plot_returns" title="Permalink to this definition">¶</a></dt>
<dd><p>Display plots of equity, drawdowns and returns for the given contract group or for all contract groups if contract_group
is None (default)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Figure</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.strategy.Strategy.roundtrip_trades">
<span class="sig-name descname"><span class="pre">roundtrip_trades</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract_group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.roundtrip_trades"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.roundtrip_trades" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of trades with the given contract group and with trade date between (and including) start date
and end date if they are specified.
If contract_group is None trades for all contract_groups are returned</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.RoundTripTrade" title="pyqstrat.pq_types.RoundTripTrade"><code class="xref py py-class docutils literal notranslate"><span class="pre">RoundTripTrade</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.strategy.Strategy.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.run" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.strategy.Strategy.run_indicators">
<span class="sig-name descname"><span class="pre">run_indicators</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indicator_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contract_groups</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clear_all</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.run_indicators"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.run_indicators" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate values of the indicators specified and store them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>indicator_names</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – List of indicator names.  If None (default) run all indicators</p></li>
<li><p><strong>contract_groups</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>]]) – Contract group to run this indicator for.  If None (default), we run it for all contract groups.</p></li>
<li><p><strong>clear_all</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If set, clears all indicator values before running.  Default False.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.strategy.Strategy.run_rules">
<span class="sig-name descname"><span class="pre">run_rules</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rule_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contract_groups</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.run_rules"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.run_rules" title="Permalink to this definition">¶</a></dt>
<dd><p>Run trading rules.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rule_names</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – List of rule names.  If None (default) run all rules</p></li>
<li><p><strong>contract_groups</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>]]) – Contract groups to run this rule for.  If None (default), we run it for all contract groups.</p></li>
<li><p><strong>start_date</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>]) – Run rules starting from this date. Default None</p></li>
<li><p><strong>end_date</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>]) – Don’t run rules after this date.  Default None</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.strategy.Strategy.run_signals">
<span class="sig-name descname"><span class="pre">run_signals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contract_groups</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clear_all</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.run_signals"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.run_signals" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate values of the signals specified and store them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>signal_names</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – List of signal names.  If None (default) run all signals</p></li>
<li><p><strong>contract_groups</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>]]) – Contract groups to run this signal for. If None (default), we run it for all contract groups.</p></li>
<li><p><strong>clear_all</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If set, clears all signal values before running.  Default False.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.strategy.Strategy.trades">
<span class="sig-name descname"><span class="pre">trades</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract_group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.trades"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.trades" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of trades with the given contract group and with trade date between (and including) start date
and end date if they are specified.
If contract_group is None trades for all contract_groups are returned</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.Trade" title="pyqstrat.pq_types.Trade"><code class="xref py py-class docutils literal notranslate"><span class="pre">Trade</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.strategy.test_strategy">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.strategy.</span></span><span class="sig-name descname"><span class="pre">test_strategy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#test_strategy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.strategy.test_strategy" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#pyqstrat.strategy.Strategy" title="pyqstrat.strategy.Strategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">Strategy</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.strategy.test_strategy_2">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.strategy.</span></span><span class="sig-name descname"><span class="pre">test_strategy_2</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#test_strategy_2"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.strategy.test_strategy_2" title="Permalink to this definition">¶</a></dt>
<dd><p>Test of a dummy strategy</p>
</dd></dl>

</div>
<div class="section" id="module-pyqstrat.portfolio">
<span id="pyqstrat-portfolio-module"></span><h2>pyqstrat.portfolio module<a class="headerlink" href="#module-pyqstrat.portfolio" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.portfolio.Portfolio">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.portfolio.</span></span><span class="sig-name descname"><span class="pre">Portfolio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'main'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/portfolio.html#Portfolio"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.portfolio.Portfolio" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A portfolio contains one or more strategies that run concurrently so you can test running strategies that are uncorrelated together.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.portfolio.Portfolio.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'main'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/portfolio.html#Portfolio.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.portfolio.Portfolio.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Args:
name: String used for displaying this portfolio</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.portfolio.Portfolio.add_strategy">
<span class="sig-name descname"><span class="pre">add_strategy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strategy</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/portfolio.html#Portfolio.add_strategy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.portfolio.Portfolio.add_strategy" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name of the strategy</p></li>
<li><p><strong>strategy</strong> (<a class="reference internal" href="#pyqstrat.strategy.Strategy" title="pyqstrat.strategy.Strategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">Strategy</span></code></a>) – Strategy instance</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.portfolio.Portfolio.df_returns">
<span class="sig-name descname"><span class="pre">df_returns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sampling_frequency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'D'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strategy_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/portfolio.html#Portfolio.df_returns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.portfolio.Portfolio.df_returns" title="Permalink to this definition">¶</a></dt>
<dd><p>Return dataframe containing equity and returns with a date index.  Equity and returns are combined from all strategies passed in.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sampling_frequency</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Date frequency for rows.  Default ‘D’ for daily so we will have one row per day</p></li>
<li><p><strong>strategy_names</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – By default this is set to None and we use all strategies.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.portfolio.Portfolio.evaluate_returns">
<span class="sig-name descname"><span class="pre">evaluate_returns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sampling_frequency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'D'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strategy_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">float_precision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/portfolio.html#Portfolio.evaluate_returns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.portfolio.Portfolio.evaluate_returns" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary of common return metrics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sampling_frequency</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Date frequency.  Default ‘D’ for daily so we downsample to daily returns before computing metrics</p></li>
<li><p><strong>strategy_names</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – By default this is set to None and we use all strategies.</p></li>
<li><p><strong>plot</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If set to True, display plots of equity, drawdowns and returns.  Default False</p></li>
<li><p><strong>float_precision</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Number of significant figures to show in returns.  Default 4</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.portfolio.Portfolio.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sampling_frequency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'D'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strategy_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/portfolio.html#Portfolio.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.portfolio.Portfolio.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Display plots of equity, drawdowns and returns</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sampling_frequency</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Date frequency.  Default ‘D’ for daily so we downsample to daily returns before computing metrics</p></li>
<li><p><strong>strategy_names</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – A list of strategy names.  By default this is set to None and we use all strategies.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.portfolio.Portfolio.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/portfolio.html#Portfolio.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.portfolio.Portfolio.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run indicators, signals and rules.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>strategy_names</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – A list of strategy names.  By default this is set to None and we use all strategies.</p></li>
<li><p><strong>start_date</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>]) – Run rules starting from this date.
Sometimes we have a few strategies in a portfolio that need different lead times before they are ready to trade
so you can set this so they are all ready by this date.  Default None</p></li>
<li><p><strong>end_date</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>]) – Don’t run rules after this date.  Default None</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.portfolio.Portfolio.run_indicators">
<span class="sig-name descname"><span class="pre">run_indicators</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/portfolio.html#Portfolio.run_indicators"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.portfolio.Portfolio.run_indicators" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute indicators for the strategies specified</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>strategy_names</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – By default this is set to None and we use all strategies.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.portfolio.Portfolio.run_rules">
<span class="sig-name descname"><span class="pre">run_rules</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/portfolio.html#Portfolio.run_rules"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.portfolio.Portfolio.run_rules" title="Permalink to this definition">¶</a></dt>
<dd><p>Run rules for the strategies specified.  Must be called after run_indicators and run_signals.
See run function for argument descriptions</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.portfolio.Portfolio.run_signals">
<span class="sig-name descname"><span class="pre">run_signals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/portfolio.html#Portfolio.run_signals"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.portfolio.Portfolio.run_signals" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute signals for the strategies specified.  Must be called after run_indicators</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>strategy_names</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – By default this is set to None and we use all strategies.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pyqstrat.optimize">
<span id="pyqstrat-optimize-module"></span><h2>pyqstrat.optimize module<a class="headerlink" href="#module-pyqstrat.optimize" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.optimize.Experiment">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.optimize.</span></span><span class="sig-name descname"><span class="pre">Experiment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">suggestion</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">other_costs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/optimize.html#Experiment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.optimize.Experiment" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An Experiment stores a suggestion and its result</p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.optimize.Experiment.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">suggestion</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">other_costs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/optimize.html#Experiment.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.optimize.Experiment.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>suggestion</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]) – A dictionary of variable name -&gt; value</p></li>
<li><p><strong>cost</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – A float representing output of the function we are testing with this suggestion as input.</p></li>
<li><p><strong>other_costs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – A dictionary of other results we want to store and look at later.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.optimize.Experiment.valid">
<span class="sig-name descname"><span class="pre">valid</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/optimize.html#Experiment.valid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.optimize.Experiment.valid" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if all suggestions and costs are finite, i.e not NaN or +/- Infinity</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.optimize.Optimizer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.optimize.</span></span><span class="sig-name descname"><span class="pre">Optimizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_processes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/optimize.html#Optimizer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.optimize.Optimizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Optimizer is used to optimize parameters for a strategy.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.optimize.Optimizer.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_processes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/optimize.html#Optimizer.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.optimize.Optimizer.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Display title for plotting, etc.</p></li>
<li><p><strong>generator</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Generator</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – A generator (see Python Generators) that takes no inputs and yields a dictionary with parameter name -&gt; parameter value.</p></li>
<li><p><strong>cost_func</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]], <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]]]) – A function that takes a dictionary of parameter name -&gt; parameter value as input and outputs cost for that set of parameters.</p></li>
<li><p><strong>max_processes</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – If not set, the Optimizer will look at the number of CPU cores on your machine to figure out how many processes to run.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.optimize.Optimizer.df_experiments">
<span class="sig-name descname"><span class="pre">df_experiments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sort_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cost'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ascending</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/optimize.html#Optimizer.df_experiments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.optimize.Optimizer.df_experiments" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dataframe containing experiment data, sorted by sort_column (default “cost”)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.optimize.Optimizer.experiment_list">
<span class="sig-name descname"><span class="pre">experiment_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sort_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lowest_cost'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/optimize.html#Optimizer.experiment_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.optimize.Optimizer.experiment_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the list of experiments we have run</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sort_order</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Can be set to lowest_cost, highest_cost or sequence.
If set to sequence, experiments are returned in the sequence in which they were run</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.optimize.Experiment" title="pyqstrat.optimize.Experiment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Experiment</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.optimize.Optimizer.plot_2d">
<span class="sig-name descname"><span class="pre">plot_2d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'line'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(15,</span> <span class="pre">8)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'X'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'r'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hspace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/optimize.html#Optimizer.plot_2d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.optimize.Optimizer.plot_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a 2D plot of the optimization output for plotting 1 parameter and costs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name of the parameter to plot on the x axis, corresponding to the same name in the generator.</p></li>
<li><p><strong>y</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Can be one of:
“cost”
The name of another cost variable corresponding to the output from the cost function
“all”, which creates a subplot for cost plus all other costs</p></li>
<li><p><strong>plot_type</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – line or scatter (default line)</p></li>
<li><p><strong>figsize</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – Figure size</p></li>
<li><p><strong>marker</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Adds a marker to each point in x, y to show the actual data used for interpolation.  You can set this to None to turn markers off.</p></li>
<li><p><strong>hspace</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – Vertical space between subplots</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.optimize.Optimizer.plot_3d">
<span class="sig-name descname"><span class="pre">plot_3d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'surface'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(15,</span> <span class="pre">15)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'linear'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'viridis'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'X'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'r'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hspace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/optimize.html#Optimizer.plot_3d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.optimize.Optimizer.plot_3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a 3D plot of the optimization output for plotting 2 parameters and costs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name of the parameter to plot on the x axis, corresponding to the same name in the generator.</p></li>
<li><p><strong>y</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name of the parameter to plot on the y axis, corresponding to the same name in the generator.</p></li>
<li><p><strong>z</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Can be one of:
“cost”
The name of another cost variable corresponding to the output from the cost function
“all”, which creates a subplot for cost plus all other costs</p></li>
<li><p><strong>filter_func</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>]]) – A function that can be used to reduce the dataset before plotting.
For example, you may want to filter on a dimension beyond x, y, z to pick a single value
from that dimension</p></li>
<li><p><strong>plot_type</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – surface or contour (default surface)</p></li>
<li><p><strong>figsize</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – Figure size</p></li>
<li><p><strong>interpolation</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Can be ‘linear’, ‘nearest’ or ‘cubic’ for plotting z points between the ones passed in.  See scipy.interpolate.griddata for details</p></li>
<li><p><strong>cmap</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Colormap to use (default viridis).  See matplotlib colormap for details</p></li>
<li><p><strong>marker</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Adds a marker to each point in x, y, z to show the actual data used for interpolation.  You can set this to None to turn markers off.</p></li>
<li><p><strong>hspace</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – Vertical space between subplots</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.optimize.Optimizer.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raise_on_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/optimize.html#Optimizer.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.optimize.Optimizer.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the optimizer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>raise_on_error</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If set to True, even if we are running a multiprocess optimization, any Exceptions will bubble up and stop the Optimizer.
This can be useful for debugging to see stack traces for Exceptions.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.optimize.flatten_keys">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.optimize.</span></span><span class="sig-name descname"><span class="pre">flatten_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">experiments</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/optimize.html#flatten_keys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.optimize.flatten_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility function so we can find all keys for other costs in all experiments even if the first experiment
does not have all of them</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.optimize.test_optimize">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.optimize.</span></span><span class="sig-name descname"><span class="pre">test_optimize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/optimize.html#test_optimize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.optimize.test_optimize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-pyqstrat.plot">
<span id="pyqstrat-plot-module"></span><h2>pyqstrat.plot module<a class="headerlink" href="#module-pyqstrat.plot" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.plot.BarPlotAttributes">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">BarPlotAttributes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'red'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#BarPlotAttributes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.BarPlotAttributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.DisplayAttributes" title="pyqstrat.plot.DisplayAttributes"><code class="xref py py-class docutils literal notranslate"><span class="pre">DisplayAttributes</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.BarPlotAttributes.color">
<span class="sig-name descname"><span class="pre">color</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'red'</span></em><a class="headerlink" href="#pyqstrat.plot.BarPlotAttributes.color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.plot.BoxPlotAttributes">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">BoxPlotAttributes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">proportional_widths</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_means</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_all</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_outliers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">notched</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#BoxPlotAttributes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.BoxPlotAttributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.DisplayAttributes" title="pyqstrat.plot.DisplayAttributes"><code class="xref py py-class docutils literal notranslate"><span class="pre">DisplayAttributes</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.BoxPlotAttributes.proportional_widths">
<span class="sig-name descname"><span class="pre">proportional_widths</span></span><a class="headerlink" href="#pyqstrat.plot.BoxPlotAttributes.proportional_widths" title="Permalink to this definition">¶</a></dt>
<dd><p>if set to True, the width each box in the boxplot will be proportional
to the number of items in its corresponding array</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.BoxPlotAttributes.show_means">
<span class="sig-name descname"><span class="pre">show_means</span></span><a class="headerlink" href="#pyqstrat.plot.BoxPlotAttributes.show_means" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether to display a marker where the mean is for each array</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.BoxPlotAttributes.show_outliers">
<span class="sig-name descname"><span class="pre">show_outliers</span></span><a class="headerlink" href="#pyqstrat.plot.BoxPlotAttributes.show_outliers" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether to show markers for outliers that are outside the whiskers.
Box is at Q1 = 25%, Q3 = 75% quantiles, whiskers are at Q1 - 1.5 * (Q3 - Q1), Q3 + 1.5 * (Q3 - Q1)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.BoxPlotAttributes.notched">
<span class="sig-name descname"><span class="pre">notched</span></span><a class="headerlink" href="#pyqstrat.plot.BoxPlotAttributes.notched" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether to show notches indicating the confidence interval around the median</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id0">
<span class="sig-name descname"><span class="pre">notched</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#id0" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id1">
<span class="sig-name descname"><span class="pre">proportional_widths</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#id1" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.BoxPlotAttributes.show_all">
<span class="sig-name descname"><span class="pre">show_all</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#pyqstrat.plot.BoxPlotAttributes.show_all" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id2">
<span class="sig-name descname"><span class="pre">show_means</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#id2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id3">
<span class="sig-name descname"><span class="pre">show_outliers</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#id3" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.plot.BucketedValues">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">BucketedValues</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket_names</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_attributes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#BucketedValues"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.BucketedValues" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.PlotData" title="pyqstrat.plot.PlotData"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlotData</span></code></a></p>
<dl class="simple">
<dt>Data in a subplot where we summarize properties of a numpy array.</dt><dd><p>For example, drawing a boxplot with percentiles.  x axis is a categorical</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.plot.BucketedValues.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket_names</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_attributes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#BucketedValues.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.BucketedValues.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – name used for this data in a plot legend</p></li>
<li><p><strong>bucket_names</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – list of strings used on x axis labels</p></li>
<li><p><strong>bucket_values</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – list of numpy arrays that are summarized in this plot</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.BucketedValues.display_attributes">
<span class="sig-name descname"><span class="pre">display_attributes</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pyqstrat.plot.DisplayAttributes" title="pyqstrat.plot.DisplayAttributes"><span class="pre">DisplayAttributes</span></a></em><a class="headerlink" href="#pyqstrat.plot.BucketedValues.display_attributes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.BucketedValues.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#pyqstrat.plot.BucketedValues.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.plot.CandleStickPlotAttributes">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">CandleStickPlotAttributes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">colorup</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'darkgreen'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colordown</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'#F2583E'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#CandleStickPlotAttributes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.CandleStickPlotAttributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.DisplayAttributes" title="pyqstrat.plot.DisplayAttributes"><code class="xref py py-class docutils literal notranslate"><span class="pre">DisplayAttributes</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.CandleStickPlotAttributes.colordown">
<span class="sig-name descname"><span class="pre">colordown</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'#F2583E'</span></em><a class="headerlink" href="#pyqstrat.plot.CandleStickPlotAttributes.colordown" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.CandleStickPlotAttributes.colorup">
<span class="sig-name descname"><span class="pre">colorup</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'darkgreen'</span></em><a class="headerlink" href="#pyqstrat.plot.CandleStickPlotAttributes.colorup" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.plot.ContourPlotAttributes">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">ContourPlotAttributes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">marker='X'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_size=50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_color='red'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolation='linear'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap=&lt;matplotlib.colors.LinearSegmentedColormap</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_level=nan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_level=nan</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#ContourPlotAttributes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.ContourPlotAttributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.DisplayAttributes" title="pyqstrat.plot.DisplayAttributes"><code class="xref py py-class docutils literal notranslate"><span class="pre">DisplayAttributes</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.ContourPlotAttributes.cmap">
<span class="sig-name descname"><span class="pre">cmap</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Colormap</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;matplotlib.colors.LinearSegmentedColormap</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#pyqstrat.plot.ContourPlotAttributes.cmap" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.ContourPlotAttributes.interpolation">
<span class="sig-name descname"><span class="pre">interpolation</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'linear'</span></em><a class="headerlink" href="#pyqstrat.plot.ContourPlotAttributes.interpolation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.ContourPlotAttributes.marker">
<span class="sig-name descname"><span class="pre">marker</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'X'</span></em><a class="headerlink" href="#pyqstrat.plot.ContourPlotAttributes.marker" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.ContourPlotAttributes.marker_color">
<span class="sig-name descname"><span class="pre">marker_color</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'red'</span></em><a class="headerlink" href="#pyqstrat.plot.ContourPlotAttributes.marker_color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.ContourPlotAttributes.marker_size">
<span class="sig-name descname"><span class="pre">marker_size</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">50</span></em><a class="headerlink" href="#pyqstrat.plot.ContourPlotAttributes.marker_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.ContourPlotAttributes.max_level">
<span class="sig-name descname"><span class="pre">max_level</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">nan</span></em><a class="headerlink" href="#pyqstrat.plot.ContourPlotAttributes.max_level" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.ContourPlotAttributes.min_level">
<span class="sig-name descname"><span class="pre">min_level</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">nan</span></em><a class="headerlink" href="#pyqstrat.plot.ContourPlotAttributes.min_level" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.plot.DateFormatter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">DateFormatter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmt</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#DateFormatter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.DateFormatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Formatter</span></code></p>
<p>Formats timestamps on plot axes.  See matplotlib Formatter</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.plot.DateLine">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">DateLine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'dashed'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#DateLine"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.DateLine" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Draw a vertical line on a plot with a datetime x-axis</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.plot.DisplayAttributes">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">DisplayAttributes</span></span><a class="reference internal" href="_modules/pyqstrat/plot.html#DisplayAttributes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.DisplayAttributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.plot.FilledLinePlotAttributes">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">FilledLinePlotAttributes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">positive_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'blue'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">negative_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'red'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#FilledLinePlotAttributes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.FilledLinePlotAttributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.DisplayAttributes" title="pyqstrat.plot.DisplayAttributes"><code class="xref py py-class docutils literal notranslate"><span class="pre">DisplayAttributes</span></code></a></p>
<p>colorup: Color for bars where close &gt;= open.  Default “darkgreen”
colordown: Color for bars where open &lt; close.  Default “#F2583E”</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.FilledLinePlotAttributes.negative_color">
<span class="sig-name descname"><span class="pre">negative_color</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'red'</span></em><a class="headerlink" href="#pyqstrat.plot.FilledLinePlotAttributes.negative_color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.FilledLinePlotAttributes.positive_color">
<span class="sig-name descname"><span class="pre">positive_color</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'blue'</span></em><a class="headerlink" href="#pyqstrat.plot.FilledLinePlotAttributes.positive_color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.plot.HorizontalLine">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">HorizontalLine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'dashed'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#HorizontalLine"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.HorizontalLine" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Draws a horizontal line on a subplot</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.plot.LinePlotAttributes">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">LinePlotAttributes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'solid'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#LinePlotAttributes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.LinePlotAttributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.DisplayAttributes" title="pyqstrat.plot.DisplayAttributes"><code class="xref py py-class docutils literal notranslate"><span class="pre">DisplayAttributes</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.LinePlotAttributes.color">
<span class="sig-name descname"><span class="pre">color</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#pyqstrat.plot.LinePlotAttributes.color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.LinePlotAttributes.line_type">
<span class="sig-name descname"><span class="pre">line_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'solid'</span></em><a class="headerlink" href="#pyqstrat.plot.LinePlotAttributes.line_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.LinePlotAttributes.line_width">
<span class="sig-name descname"><span class="pre">line_width</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#pyqstrat.plot.LinePlotAttributes.line_width" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.LinePlotAttributes.marker">
<span class="sig-name descname"><span class="pre">marker</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#pyqstrat.plot.LinePlotAttributes.marker" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.LinePlotAttributes.marker_color">
<span class="sig-name descname"><span class="pre">marker_color</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#pyqstrat.plot.LinePlotAttributes.marker_color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.LinePlotAttributes.marker_size">
<span class="sig-name descname"><span class="pre">marker_size</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#pyqstrat.plot.LinePlotAttributes.marker_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.plot.Plot">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">Plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subplot_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(15,</span> <span class="pre">8)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampling_frequency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_grid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_date_gaps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hspace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.15</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#Plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.Plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Top level plot containing a list of subplots to draw</p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.plot.Plot.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subplot_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(15,</span> <span class="pre">8)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampling_frequency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_grid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_date_gaps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hspace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.15</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#Plot.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.Plot.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subplot_list</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.plot.Subplot" title="pyqstrat.plot.Subplot"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subplot</span></code></a>]) – List of Subplot objects to draw</p></li>
<li><p><strong>title</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Title for this plot.  Default None</p></li>
<li><p><strong>figsize</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – Figure size.  Default (15, 8)</p></li>
<li><p><strong>date_range</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Tuple of strings or numpy datetime64 limiting timestamps to draw.  e.g. (“2018-01-01 14:00”, “2018-01-05”). Default None</p></li>
<li><p><strong>date_format</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Date format to use for x-axis</p></li>
<li><p><strong>sampling_frequency</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Set this to downsample subplots that have a datetime x axis.
For example, if you have minute bar data, you might want to subsample to hours if the plot is too crowded.
See pandas time frequency strings for possible values.  Default None</p></li>
<li><p><strong>show_grid</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If set to True, show a grid on the subplots.  Default True</p></li>
<li><p><strong>show_date_gaps</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If set to True, then when there is a gap between timestamps will draw a dashed vertical line.
For example, you may have minute bars and a gap between end of trading day and beginning of next day.
Even if set to True, this will turn itself off if there are too many gaps to avoid clutter.  Default True</p></li>
<li><p><strong>hspace</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – Height (vertical) space between subplots.  Default 0.15</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.plot.Plot.draw">
<span class="sig-name descname"><span class="pre">draw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">check_data_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#Plot.draw"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.Plot.draw" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw the subplots.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>check_data_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If set to True, will not plot if there are &gt; 100K points to avoid locking up your computer for a long time.
Default True</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Figure</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code>]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.plot.PlotData">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">PlotData</span></span><a class="reference internal" href="_modules/pyqstrat/plot.html#PlotData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.PlotData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.PlotData.display_attributes">
<span class="sig-name descname"><span class="pre">display_attributes</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pyqstrat.plot.DisplayAttributes" title="pyqstrat.plot.DisplayAttributes"><span class="pre">DisplayAttributes</span></a></em><a class="headerlink" href="#pyqstrat.plot.PlotData.display_attributes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.PlotData.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#pyqstrat.plot.PlotData.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.plot.ScatterPlotAttributes">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">ScatterPlotAttributes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">marker</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'X'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'red'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#ScatterPlotAttributes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.ScatterPlotAttributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.DisplayAttributes" title="pyqstrat.plot.DisplayAttributes"><code class="xref py py-class docutils literal notranslate"><span class="pre">DisplayAttributes</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.ScatterPlotAttributes.marker">
<span class="sig-name descname"><span class="pre">marker</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'X'</span></em><a class="headerlink" href="#pyqstrat.plot.ScatterPlotAttributes.marker" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.ScatterPlotAttributes.marker_color">
<span class="sig-name descname"><span class="pre">marker_color</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'red'</span></em><a class="headerlink" href="#pyqstrat.plot.ScatterPlotAttributes.marker_color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.ScatterPlotAttributes.marker_size">
<span class="sig-name descname"><span class="pre">marker_size</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">50</span></em><a class="headerlink" href="#pyqstrat.plot.ScatterPlotAttributes.marker_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.plot.Subplot">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">Subplot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">secondary_y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlabel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylabel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zlabel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_lines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">horizontal_lines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vertical_lines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height_ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_legend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legend_loc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'best'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_tick_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#Subplot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.Subplot" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A top level plot contains a list of subplots, each of which contain a list of data objects to draw</p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.plot.Subplot.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">secondary_y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlabel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylabel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zlabel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_lines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">horizontal_lines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vertical_lines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height_ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_legend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legend_loc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'best'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_tick_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#Subplot.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.Subplot.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_list</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="#pyqstrat.plot.PlotData" title="pyqstrat.plot.PlotData"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlotData</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.plot.PlotData" title="pyqstrat.plot.PlotData"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlotData</span></code></a>]]) – A list of objects to draw.  Each element can contain XYData, XYZData, TimeSeries, TradeBarSeries,
BucketedValues or TradeSet</p></li>
<li><p><strong>secondary_y</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – A list of objects to draw on the secondary y axis</p></li>
<li><p><strong>title</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Title to show for this subplot. Default None</p></li>
<li><p><strong>zlabel</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Only applicable to 3d subplots.  Default None</p></li>
<li><p><strong>date_lines</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.plot.DateLine" title="pyqstrat.plot.DateLine"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateLine</span></code></a>]]) – A list of DateLine objects to draw as vertical lines. Only applicable when x axis is datetime.
Default None</p></li>
<li><p><strong>horizontal_lines</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.plot.HorizontalLine" title="pyqstrat.plot.HorizontalLine"><code class="xref py py-class docutils literal notranslate"><span class="pre">HorizontalLine</span></code></a>]]) – A list of HorizontalLine objects to draw on the plot.  Default None</p></li>
<li><p><strong>vertical_lines</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.plot.VerticalLine" title="pyqstrat.plot.VerticalLine"><code class="xref py py-class docutils literal notranslate"><span class="pre">VerticalLine</span></code></a>]]) – A list of VerticalLine objects to draw on the plot</p></li>
<li><p><strong>xlim</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – x limits for the plot as a tuple of numpy datetime objects when x-axis is datetime,
or tuple of floats. Default None</p></li>
<li><p><strong>ylim</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – y limits for the plot.  Tuple of floats.  Default None</p></li>
<li><p><strong>height_ratio</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – If you have more than one subplot on a plot, use height ratio to determine how high each subplot should be.
For example, if you set height_ratio = 0.75 for the first subplot and 0.25 for the second,
the first will be 3 times taller than the second one. Default 1.0</p></li>
<li><p><strong>display_legend</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Whether to show a legend on the plot.  Default True</p></li>
<li><p><strong>legend_loc</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Location for the legend. Default ‘best’</p></li>
<li><p><strong>log_y</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Whether the y axis should be logarithmic.  Default False</p></li>
<li><p><strong>y_tick_format</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Format string to use for y axis labels.  For example, you can decide to
use fixed notation instead of scientific notation or change number of decimal places shown.  Default None</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.plot.Subplot.get_all_timestamps">
<span class="sig-name descname"><span class="pre">get_all_timestamps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date_range</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#Subplot.get_all_timestamps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.Subplot.get_all_timestamps" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.plot.SurfacePlotAttributes">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">SurfacePlotAttributes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">marker='X'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_size=50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_color='red'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolation='linear'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap=&lt;matplotlib.colors.LinearSegmentedColormap</span> <span class="pre">object&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#SurfacePlotAttributes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.SurfacePlotAttributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.DisplayAttributes" title="pyqstrat.plot.DisplayAttributes"><code class="xref py py-class docutils literal notranslate"><span class="pre">DisplayAttributes</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.SurfacePlotAttributes.marker">
<span class="sig-name descname"><span class="pre">marker</span></span><a class="headerlink" href="#pyqstrat.plot.SurfacePlotAttributes.marker" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a marker to each point in x, y, z to show the actual data used for interpolation.
You can set this to None to turn markers off.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.SurfacePlotAttributes.interpolation">
<span class="sig-name descname"><span class="pre">interpolation</span></span><a class="headerlink" href="#pyqstrat.plot.SurfacePlotAttributes.interpolation" title="Permalink to this definition">¶</a></dt>
<dd><p>Can be ‘linear’, ‘nearest’ or ‘cubic’ for plotting z points between the ones passed in.
See scipy.interpolate.griddata for details</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.SurfacePlotAttributes.cmap">
<span class="sig-name descname"><span class="pre">cmap</span></span><a class="headerlink" href="#pyqstrat.plot.SurfacePlotAttributes.cmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Colormap to use (default matplotlib.cm.RdBu_r).  See matplotlib colormap for details</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>matplotlib.colors.Colormap</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id4">
<span class="sig-name descname"><span class="pre">cmap</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Colormap</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;matplotlib.colors.LinearSegmentedColormap</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#id4" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id5">
<span class="sig-name descname"><span class="pre">interpolation</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'linear'</span></em><a class="headerlink" href="#id5" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id6">
<span class="sig-name descname"><span class="pre">marker</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'X'</span></em><a class="headerlink" href="#id6" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.SurfacePlotAttributes.marker_color">
<span class="sig-name descname"><span class="pre">marker_color</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'red'</span></em><a class="headerlink" href="#pyqstrat.plot.SurfacePlotAttributes.marker_color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.SurfacePlotAttributes.marker_size">
<span class="sig-name descname"><span class="pre">marker_size</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">50</span></em><a class="headerlink" href="#pyqstrat.plot.SurfacePlotAttributes.marker_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.plot.TimePlotData">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">TimePlotData</span></span><a class="reference internal" href="_modules/pyqstrat/plot.html#TimePlotData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.TimePlotData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.PlotData" title="pyqstrat.plot.PlotData"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlotData</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.plot.TimePlotData.reindex">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">reindex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#TimePlotData.reindex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.TimePlotData.reindex" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.TimePlotData.timestamps">
<span class="sig-name descname"><span class="pre">timestamps</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ndarray</span></em><a class="headerlink" href="#pyqstrat.plot.TimePlotData.timestamps" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.plot.TimeSeries">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">TimeSeries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_attributes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#TimeSeries"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.TimeSeries" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.TimePlotData" title="pyqstrat.plot.TimePlotData"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimePlotData</span></code></a></p>
<p>Data in a subplot where x is an array of numpy datetimes and y is a numpy array of floats</p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.plot.TimeSeries.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_attributes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#TimeSeries.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.TimeSeries.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name to show in plot legend</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.TimeSeries.display_attributes">
<span class="sig-name descname"><span class="pre">display_attributes</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pyqstrat.plot.DisplayAttributes" title="pyqstrat.plot.DisplayAttributes"><span class="pre">DisplayAttributes</span></a></em><a class="headerlink" href="#pyqstrat.plot.TimeSeries.display_attributes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.TimeSeries.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#pyqstrat.plot.TimeSeries.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.plot.TimeSeries.reindex">
<span class="sig-name descname"><span class="pre">reindex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#TimeSeries.reindex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.TimeSeries.reindex" title="Permalink to this definition">¶</a></dt>
<dd><p>Reindex this series given a new array of timestamps, forward filling holes if fill is set to True</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.TimeSeries.timestamps">
<span class="sig-name descname"><span class="pre">timestamps</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ndarray</span></em><a class="headerlink" href="#pyqstrat.plot.TimeSeries.timestamps" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.plot.TradeBarSeries">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">TradeBarSeries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">o</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">h</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">l</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vwap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_attributes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#TradeBarSeries"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.TradeBarSeries" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.TimePlotData" title="pyqstrat.plot.TimePlotData"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimePlotData</span></code></a></p>
<p>Data in a subplot that contains open, high, low, close, volume bars.  volume is optional.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.plot.TradeBarSeries.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">o</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">h</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">l</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vwap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_attributes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#TradeBarSeries.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.TradeBarSeries.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name to show in a legend</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.plot.TradeBarSeries.df">
<span class="sig-name descname"><span class="pre">df</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#TradeBarSeries.df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.TradeBarSeries.df" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.TradeBarSeries.display_attributes">
<span class="sig-name descname"><span class="pre">display_attributes</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pyqstrat.plot.DisplayAttributes" title="pyqstrat.plot.DisplayAttributes"><span class="pre">DisplayAttributes</span></a></em><a class="headerlink" href="#pyqstrat.plot.TradeBarSeries.display_attributes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.TradeBarSeries.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#pyqstrat.plot.TradeBarSeries.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.plot.TradeBarSeries.reindex">
<span class="sig-name descname"><span class="pre">reindex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">all_timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#TradeBarSeries.reindex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.TradeBarSeries.reindex" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.TradeBarSeries.timestamps">
<span class="sig-name descname"><span class="pre">timestamps</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ndarray</span></em><a class="headerlink" href="#pyqstrat.plot.TradeBarSeries.timestamps" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.plot.TradeSet">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">TradeSet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trades</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_attributes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#TradeSet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.TradeSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.TimePlotData" title="pyqstrat.plot.TimePlotData"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimePlotData</span></code></a></p>
<p>Data for subplot that contains a set of trades along with marker properties for these trades</p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.plot.TradeSet.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trades</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_attributes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#TradeSet.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.TradeSet.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – String to display in a subplot legend</p></li>
<li><p><strong>trades</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.Trade" title="pyqstrat.pq_types.Trade"><code class="xref py py-class docutils literal notranslate"><span class="pre">Trade</span></code></a>]) – List of Trade objects to plot</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.TradeSet.display_attributes">
<span class="sig-name descname"><span class="pre">display_attributes</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pyqstrat.plot.DisplayAttributes" title="pyqstrat.plot.DisplayAttributes"><span class="pre">DisplayAttributes</span></a></em><a class="headerlink" href="#pyqstrat.plot.TradeSet.display_attributes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.TradeSet.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#pyqstrat.plot.TradeSet.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.plot.TradeSet.reindex">
<span class="sig-name descname"><span class="pre">reindex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">all_timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#TradeSet.reindex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.TradeSet.reindex" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.TradeSet.timestamps">
<span class="sig-name descname"><span class="pre">timestamps</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ndarray</span></em><a class="headerlink" href="#pyqstrat.plot.TradeSet.timestamps" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.plot.VerticalLine">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">VerticalLine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'dashed'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#VerticalLine"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.VerticalLine" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Draws a vertical line on a subplot where x axis is not a date-time axis</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.plot.XYData">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">XYData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_attributes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#XYData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.XYData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.PlotData" title="pyqstrat.plot.PlotData"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlotData</span></code></a></p>
<p>Data in a subplot that has x and y values that are both arrays of floats</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.XYData.display_attributes">
<span class="sig-name descname"><span class="pre">display_attributes</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pyqstrat.plot.DisplayAttributes" title="pyqstrat.plot.DisplayAttributes"><span class="pre">DisplayAttributes</span></a></em><a class="headerlink" href="#pyqstrat.plot.XYData.display_attributes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.XYData.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#pyqstrat.plot.XYData.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.plot.XYZData">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">XYZData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_attributes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#XYZData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.XYZData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.PlotData" title="pyqstrat.plot.PlotData"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlotData</span></code></a></p>
<p>Data in a subplot that has x, y and z values that are all floats</p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.plot.XYZData.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_attributes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#XYZData.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.XYZData.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name to show in plot legend</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.XYZData.display_attributes">
<span class="sig-name descname"><span class="pre">display_attributes</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pyqstrat.plot.DisplayAttributes" title="pyqstrat.plot.DisplayAttributes"><span class="pre">DisplayAttributes</span></a></em><a class="headerlink" href="#pyqstrat.plot.XYZData.display_attributes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.plot.XYZData.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#pyqstrat.plot.XYZData.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.plot.draw_3d_plot">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">draw_3d_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_type='contour'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker='X'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_size=50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_color='red'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolation='linear'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap=&lt;matplotlib.colors.LinearSegmentedColormap</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_level=nan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_level=nan</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#draw_3d_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.draw_3d_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw a 3d plot.  See XYZData class for explanation of arguments</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">y</span> <span class="o">**</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">has_display</span><span class="p">():</span>
<span class="gp">... </span>   <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="gp">... </span>   <span class="n">draw_3d_plot</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">z</span><span class="p">,</span> <span class="n">plot_type</span> <span class="o">=</span> <span class="s1">&#39;contour&#39;</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="s1">&#39;linear&#39;</span><span class="p">);</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.plot.draw_boxplot">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">draw_boxplot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proportional_widths</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">notched</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_outliers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_means</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_all</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#draw_boxplot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.draw_boxplot" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw a boxplot.  See BucketedValues class for explanation of arguments</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.plot.draw_candlestick">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">draw_candlestick</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">o</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">h</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">l</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vwap</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colorup</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'darkgreen'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colordown</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'#F2583E'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#draw_candlestick"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.draw_candlestick" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw candlesticks given parrallel numpy arrays of o, h, l, c, v values.  v is optional.
See TradeBarSeries class __init__ for argument descriptions.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.plot.draw_date_line">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">draw_date_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linestyle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#draw_date_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.draw_date_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw vertical line on a subplot with datetime x axis</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Line2D</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.plot.draw_horizontal_line">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">draw_horizontal_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linestyle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#draw_horizontal_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.draw_horizontal_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw horizontal line on a subplot</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Line2D</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.plot.draw_poly">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">draw_poly</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bottom</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facecolor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edgecolor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zorder</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#draw_poly"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.draw_poly" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw a set of polygrams given parrallel numpy arrays of left, bottom, top, right points</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.plot.draw_vertical_line">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">draw_vertical_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linestyle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#draw_vertical_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.draw_vertical_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw vertical line on a subplot</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Line2D</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.plot.get_date_formatter">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">get_date_formatter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plot_timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_format</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#get_date_formatter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.get_date_formatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an appropriate DateFormatter for x axis labels.
If date_format is set to None, figures out an appropriate date format based on the range of timestamps passed in</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#pyqstrat.plot.DateFormatter" title="pyqstrat.plot.DateFormatter"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateFormatter</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.plot.test_plot">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">test_plot</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#test_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.test_plot" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.plot.trade_sets_by_reason_code">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.plot.</span></span><span class="sig-name descname"><span class="pre">trade_sets_by_reason_code</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trades</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_props</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'backtest</span> <span class="pre">end':</span> <span class="pre">{'color':</span> <span class="pre">'green',</span> <span class="pre">'size':</span> <span class="pre">50,</span> <span class="pre">'symbol':</span> <span class="pre">'*'},</span> <span class="pre">'enter</span> <span class="pre">long':</span> <span class="pre">{'color':</span> <span class="pre">'blue',</span> <span class="pre">'size':</span> <span class="pre">50,</span> <span class="pre">'symbol':</span> <span class="pre">'P'},</span> <span class="pre">'enter</span> <span class="pre">short':</span> <span class="pre">{'color':</span> <span class="pre">'red',</span> <span class="pre">'size':</span> <span class="pre">50,</span> <span class="pre">'symbol':</span> <span class="pre">'P'},</span> <span class="pre">'exit</span> <span class="pre">long':</span> <span class="pre">{'color':</span> <span class="pre">'blue',</span> <span class="pre">'size':</span> <span class="pre">50,</span> <span class="pre">'symbol':</span> <span class="pre">'X'},</span> <span class="pre">'exit</span> <span class="pre">short':</span> <span class="pre">{'color':</span> <span class="pre">'red',</span> <span class="pre">'size':</span> <span class="pre">50,</span> <span class="pre">'symbol':</span> <span class="pre">'X'},</span> <span class="pre">'none':</span> <span class="pre">{'color':</span> <span class="pre">'green',</span> <span class="pre">'size':</span> <span class="pre">50,</span> <span class="pre">'symbol':</span> <span class="pre">'o'},</span> <span class="pre">'roll</span> <span class="pre">future':</span> <span class="pre">{'color':</span> <span class="pre">'green',</span> <span class="pre">'size':</span> <span class="pre">50,</span> <span class="pre">'symbol':</span> <span class="pre">'&gt;'}}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_missing_properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#trade_sets_by_reason_code"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.plot.trade_sets_by_reason_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of TradeSet objects.  Each TradeSet contains trades with a different reason code.  The markers for each TradeSet
are set by looking up marker properties for each reason code using the marker_props argument:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trades</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.Trade" title="pyqstrat.pq_types.Trade"><code class="xref py py-class docutils literal notranslate"><span class="pre">Trade</span></code></a>]) – We look up reason codes using the reason code on the corresponding orders</p></li>
<li><p><strong>marker_props</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>]) – Dictionary from reason code string -&gt; dictionary of marker properties.
See ReasonCode.MARKER_PROPERTIES for example.  Default ReasonCode.MARKER_PROPERTIES</p></li>
<li><p><strong>remove_missing_properties</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If set, we remove any reason codes that dont’ have marker properties set.
Default True</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<a class="reference internal" href="#pyqstrat.plot.TradeSet" title="pyqstrat.plot.TradeSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">TradeSet</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-pyqstrat.evaluator">
<span id="pyqstrat-evaluator-module"></span><h2>pyqstrat.evaluator module<a class="headerlink" href="#module-pyqstrat.evaluator" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.evaluator.Evaluator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">Evaluator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">initial_metrics</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#Evaluator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.Evaluator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>You add functions to the evaluator that are dependent on the outputs of other functions.
The evaluator will call these functions in the right order
so dependencies are computed first before the functions that need their output.
You can retrieve the output of a metric using the metric member function</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span> <span class="o">=</span> <span class="n">Evaluator</span><span class="p">(</span><span class="n">initial_metrics</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span><span class="o">.</span><span class="n">add_metric</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span><span class="o">.</span><span class="n">metric</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">)</span>
<span class="go">array([ 9, 10, 11])</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.evaluator.Evaluator.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">initial_metrics</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#Evaluator.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.Evaluator.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Inits Evaluator with a dictionary of initial metrics that are used to compute subsequent metrics</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>initial_metrics</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]) – a dictionary of string name -&gt; metric.  metric can be any object including a scalar,
an array or a tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.evaluator.Evaluator.add_metric">
<span class="sig-name descname"><span class="pre">add_metric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dependencies</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#Evaluator.add_metric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.Evaluator.add_metric" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.evaluator.Evaluator.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metric_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#Evaluator.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.Evaluator.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute metrics using the internal dependency graph</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>metric_names</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – an array of metric names.  If not passed in, evaluator will compute and store all metrics</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.evaluator.Evaluator.compute_metric">
<span class="sig-name descname"><span class="pre">compute_metric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metric_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#Evaluator.compute_metric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.Evaluator.compute_metric" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute and store a single metric:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>metric_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – string representing the metric to compute</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.evaluator.Evaluator.metric">
<span class="sig-name descname"><span class="pre">metric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metric_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#Evaluator.metric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.Evaluator.metric" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the value of a single metric given its name</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.evaluator.Evaluator.metrics">
<span class="sig-name descname"><span class="pre">metrics</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#Evaluator.metrics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.Evaluator.metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary of metric name -&gt; metric value</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.compute_amean">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">compute_amean</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">returns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">periods_per_year</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_amean"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_amean" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes arithmetic mean of a return array, ignoring NaNs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>returns</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – Represents returns at any frequency</p></li>
<li><p><strong>periods_per_year</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Frequency of the returns, e.g. 252 for daily returns</p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">compute_amean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.003</span><span class="p">,</span> <span class="mf">0.004</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]),</span> <span class="mi">252</span><span class="p">)</span>
<span class="go">0.882</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.compute_annual_returns">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">compute_annual_returns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">returns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">periods_per_year</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_annual_returns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_annual_returns" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes the output of compute_bucketed_returns and returns geometric mean of returns by year</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tuple with the first element being an array of years (integer) and the second element
an array of annualized returns for those years</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.compute_bucketed_returns">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">compute_bucketed_returns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">returns</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_bucketed_returns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_bucketed_returns" title="Permalink to this definition">¶</a></dt>
<dd><p>Bucket returns by year</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A tuple with the first element being a list of years and the second a list of</dt><dd><p>numpy arrays containing returns for each corresponding year</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.compute_calmar">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">compute_calmar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">returns_3yr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">periods_per_year</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mdd_pct_3yr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_calmar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_calmar" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute Calmar ratio, which is the annualized return divided by max drawdown over the last 3 years</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.compute_dates_3yr">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">compute_dates_3yr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_dates_3yr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_dates_3yr" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an array of numpy datetimes, return those that are within 3 years of the last date in the array</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.compute_equity">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">compute_equity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starting_equity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">returns</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_equity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_equity" title="Permalink to this definition">¶</a></dt>
<dd><p>Given starting equity, timestamps and returns, create a numpy array of equity at each date</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.compute_gmean">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">compute_gmean</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">returns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">periods_per_year</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_gmean"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_gmean" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute geometric mean of an array of returns</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>returns</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – a numpy array of returns, can contain nans</p></li>
<li><p><strong>periods_per_year</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Used for annualizing returns</p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">compute_gmean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;2015-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2015-03-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2015-05-01&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;M8[D]&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.002</span><span class="p">,</span> <span class="mf">0.003</span><span class="p">]),</span> <span class="mf">252.</span><span class="p">),</span> <span class="mi">6</span><span class="p">)</span>
<span class="go">0.018362</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.compute_k_ratio">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">compute_k_ratio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">equity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">periods_per_year</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">halflife_years</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_k_ratio"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_k_ratio" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute k-ratio (2013 or original versions by Lars Kestner). See <a class="reference external" href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2230949">https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2230949</a>
We also implement a modification that allows higher weighting for more recent returns.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>equity</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – a numpy array of the equity in your account</p></li>
<li><p><strong>periods_per_year</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – 252 for daily values</p></li>
<li><p><strong>halflife_years</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – If set, we use weighted linear regression to give less weight to older returns.
In this case, we compute the original k-ratio which does not use periods per year or number of observations
If not set, we compute the 2013 version of the k-ratio which weights k-ratio by sqrt(periods_per_year) / nobs</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>weighted or unweighted k-ratio</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ret</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">loc</span> <span class="o">=</span> <span class="mf">0.0025</span><span class="p">,</span> <span class="n">scale</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">equity</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">ret</span><span class="p">)</span><span class="o">.</span><span class="n">cumprod</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">compute_k_ratio</span><span class="p">(</span><span class="n">equity</span><span class="p">,</span> <span class="mi">252</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="mf">3.888</span><span class="p">,</span> <span class="n">abs_tol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">compute_k_ratio</span><span class="p">(</span><span class="n">equity</span><span class="p">,</span> <span class="mi">252</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="mf">602.140</span><span class="p">,</span> <span class="n">abs_tol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.compute_mar">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">compute_mar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">returns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">periods_per_year</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mdd_pct</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_mar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_mar" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute MAR ratio, which is annualized return divided by biggest drawdown since inception.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.compute_maxdd_date">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">compute_maxdd_date</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rolling_dd_dates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rolling_dd</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_maxdd_date"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_maxdd_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute date of max drawdown given numpy array of timestamps, and corresponding rolling dd percentages</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.compute_maxdd_date_3yr">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">compute_maxdd_date_3yr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rolling_dd_3yr_timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rolling_dd_3yr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_maxdd_date_3yr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_maxdd_date_3yr" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute max drawdown date over the last 3 years</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.compute_maxdd_pct">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">compute_maxdd_pct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rolling_dd</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_maxdd_pct"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_maxdd_pct" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute max drawdown percentage given a numpy array of rolling drawdowns, ignoring NaNs</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.compute_maxdd_pct_3yr">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">compute_maxdd_pct_3yr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rolling_dd_3yr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_maxdd_pct_3yr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_maxdd_pct_3yr" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute max drawdown percentage over the last 3 years</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.compute_maxdd_start">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">compute_maxdd_start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rolling_dd_dates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rolling_dd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mdd_date</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_maxdd_start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_maxdd_start" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute date when max drawdown starts, given numpy array of timestamps corresponding rolling dd
percentages and date of the max draw down</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.compute_maxdd_start_3yr">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">compute_maxdd_start_3yr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rolling_dd_3yr_timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rolling_dd_3yr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mdd_date_3yr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_maxdd_start_3yr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_maxdd_start_3yr" title="Permalink to this definition">¶</a></dt>
<dd><p>Comput max drawdown start date over the last 3 years</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.compute_num_periods">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">compute_num_periods</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">periods_per_year</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_num_periods"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_num_periods" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Given an array of timestamps, we compute how many periods there are between the first and last element, where the length</dt><dd><p>of a period is defined by periods_per_year.  For example, if there are 6 periods per year,
then each period would be approx. 2 months long.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamps</strong> (<em>np.ndarray of np.datetime64</em>) – a numpy array of returns, can contain nans</p></li>
<li><p><strong>periods_per_year</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – number of periods between first and last return</p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">compute_num_periods</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;2015-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2015-03-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2015-05-01&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;M8[D]&#39;</span><span class="p">),</span> <span class="mi">6</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.compute_periods_per_year">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">compute_periods_per_year</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_periods_per_year"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_periods_per_year" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Computes trading periods per year for an array of numpy datetime64’s.</dt><dd><p>e.g. if most of the timestamps are separated by 1 day, will return 252.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timestamps</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – a numpy array of datetime64’s</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">compute_periods_per_year</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;2018-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-02&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-03&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-09&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;M8[D]&#39;</span><span class="p">))</span>
<span class="go">252.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">compute_periods_per_year</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;2018-01-01 10:00&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-01 10:05&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-01 10:10&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;M8[m]&#39;</span><span class="p">)),</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">72576.05</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.compute_return_metrics">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">compute_return_metrics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starting_equity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">leading_non_finite_to_zeros</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subsequent_non_finite_to_zeros</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_return_metrics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_return_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a set of common metrics using returns (for example, of an instrument or a portfolio)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamps</strong> (<em>np.array of datetime64</em>) – Timestamps for the returns</p></li>
<li><p><strong>rets</strong> (<em>nd.array of float</em>) – The returns, use 0.01 for 1%</p></li>
<li><p><strong>starting_equity</strong> (<em>float</em>) – Starting equity value in your portfolio</p></li>
<li><p><strong>leading_non_finite_to_zeros</strong> (<em>bool</em><em>, </em><em>optional</em>) – If set, we replace leading nan, inf, -inf returns with zeros.
For example, you may need a warmup period for moving averages.  Default False</p></li>
<li><p><strong>subsequent_non_finite_to_zeros</strong> (<em>bool</em><em>, </em><em>optional</em>) – If set, we replace any nans that follow the first non nan value with zeros.
There may be periods where you have no prices but removing these returns would result in incorrect annualization.
Default True</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#pyqstrat.evaluator.Evaluator" title="pyqstrat.evaluator.Evaluator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Evaluator</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An Evaluator object containing computed metrics off the returns passed in.
If needed, you can add your own metrics to this object based on the values of existing metrics and recompute the Evaluator.
Otherwise, you can just use the output of the evaluator using the metrics function.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">timestamps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;2015-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2015-03-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2015-05-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2015-09-01&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;M8[D]&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rets</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.015</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">starting_equity</span> <span class="o">=</span> <span class="mf">1.e6</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ev</span> <span class="o">=</span> <span class="n">compute_return_metrics</span><span class="p">(</span><span class="n">timestamps</span><span class="p">,</span> <span class="n">rets</span><span class="p">,</span> <span class="n">starting_equity</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">metrics</span> <span class="o">=</span> <span class="n">ev</span><span class="o">.</span><span class="n">metrics</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;gmean&#39;</span><span class="p">],</span> <span class="mi">6</span><span class="p">)</span> <span class="o">==</span> <span class="mf">0.021061</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;sharpe&#39;</span><span class="p">],</span> <span class="mi">6</span><span class="p">)</span> <span class="o">==</span> <span class="mf">0.599382</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="nb">all</span><span class="p">(</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;returns_3yr&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.015</span><span class="p">])))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.compute_returns_3yr">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">compute_returns_3yr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">returns</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_returns_3yr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_returns_3yr" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an array of numpy datetimes and an array of returns, return those that are within 3 years
of the last date in the datetime array</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.compute_rolling_dd">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">compute_rolling_dd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">equity</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_rolling_dd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_rolling_dd" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute numpy array of rolling drawdown percentage</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamps</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – numpy array of datetime64</p></li>
<li><p><strong>equity</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – numpy array of equity</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.compute_rolling_dd_3yr">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">compute_rolling_dd_3yr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">equity</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_rolling_dd_3yr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_rolling_dd_3yr" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute rolling drawdowns over the last 3 years</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.compute_sharpe">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">compute_sharpe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">returns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amean</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">periods_per_year</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_sharpe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_sharpe" title="Permalink to this definition">¶</a></dt>
<dd><p>Note that this does not take into risk free returns so it’s really a sharpe0, i.e. assumes risk free returns are 0</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>returns</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – a numpy array of returns</p></li>
<li><p><strong>amean</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – arithmetic mean of returns</p></li>
<li><p><strong>periods_per_year</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – number of trading periods per year</p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">compute_sharpe</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.001</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.002</span><span class="p">]),</span> <span class="mf">0.001</span><span class="p">,</span> <span class="mi">252</span><span class="p">),</span> <span class="mi">6</span><span class="p">)</span>
<span class="go">0.050508</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.compute_sortino">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">compute_sortino</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">returns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amean</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">periods_per_year</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_sortino"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_sortino" title="Permalink to this definition">¶</a></dt>
<dd><p>Note that this assumes target return is 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>returns</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – a numpy array of returns</p></li>
<li><p><strong>amean</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – arithmetic mean of returns</p></li>
<li><p><strong>periods_per_year</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – number of trading periods per year</p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">compute_sortino</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.001</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.002</span><span class="p">]),</span> <span class="mf">0.001</span><span class="p">,</span> <span class="mi">252</span><span class="p">),</span> <span class="mi">6</span><span class="p">))</span>
<span class="go">0.133631</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.compute_std">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">compute_std</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">returns</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_std"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_std" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes standard deviation of an array of returns, ignoring nans</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.display_return_metrics">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">display_return_metrics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metrics</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">float_precision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#display_return_metrics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.display_return_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a dataframe making it convenient to view the output of the metrics obtained using the compute_return_metrics function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>float_precision</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Change if you want to display floats with more or less significant figures than the default,
3 significant figures.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A one row dataframe with formatted metrics.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.handle_non_finite_returns">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">handle_non_finite_returns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">leading_non_finite_to_zeros</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subsequent_non_finite_to_zeros</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#handle_non_finite_returns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.handle_non_finite_returns" title="Permalink to this definition">¶</a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">formatter</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;float&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">{: .6g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">timestamps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2019-01-01&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2019-01-07&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rets</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">handle_non_finite_returns</span><span class="p">(</span><span class="n">timestamps</span><span class="p">,</span> <span class="n">rets</span><span class="p">,</span> <span class="n">leading_non_finite_to_zeros</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">subsequent_non_finite_to_zeros</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="go">(array([&#39;2019-01-03&#39;, &#39;2019-01-04&#39;, &#39;2019-01-05&#39;, &#39;2019-01-06&#39;], dtype=&#39;datetime64[D]&#39;), array([ 3,  4,  0,  5]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">handle_non_finite_returns</span><span class="p">(</span><span class="n">timestamps</span><span class="p">,</span> <span class="n">rets</span><span class="p">,</span> <span class="n">leading_non_finite_to_zeros</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">subsequent_non_finite_to_zeros</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="go">(array([&#39;2019-01-01&#39;, &#39;2019-01-02&#39;, &#39;2019-01-03&#39;, &#39;2019-01-04&#39;, &#39;2019-01-06&#39;], dtype=&#39;datetime64[D]&#39;), array([ 0,  0,  3,  4,  5]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">handle_non_finite_returns</span><span class="p">(</span><span class="n">timestamps</span><span class="p">,</span> <span class="n">rets</span><span class="p">,</span> <span class="n">leading_non_finite_to_zeros</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">subsequent_non_finite_to_zeros</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="go">(array([&#39;2019-01-01&#39;, &#39;2019-01-02&#39;, &#39;2019-01-03&#39;, &#39;2019-01-04&#39;, &#39;2019-01-06&#39;], dtype=&#39;datetime64[D]&#39;), array([ 0,  0,  3,  4,  5]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rets</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">,</span>  <span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">handle_non_finite_returns</span><span class="p">(</span><span class="n">timestamps</span><span class="p">,</span> <span class="n">rets</span><span class="p">,</span> <span class="n">leading_non_finite_to_zeros</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">subsequent_non_finite_to_zeros</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="go">(array([&#39;2019-01-01&#39;, &#39;2019-01-02&#39;, &#39;2019-01-03&#39;, &#39;2019-01-04&#39;, &#39;2019-01-05&#39;, &#39;2019-01-06&#39;],</span>
<span class="go">    dtype=&#39;datetime64[D]&#39;), array([ 1,  2,  3,  4,  4.5,  5]))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.plot_return_metrics">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">plot_return_metrics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metrics</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">disp_attribs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drawdown_lines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zero_line</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_date_gaps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#plot_return_metrics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.plot_return_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot equity, rolling drawdowns and and a boxplot of annual returns given the output of compute_return_metrics.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Figure</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.evaluator.test_evaluator">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.evaluator.</span></span><span class="sig-name descname"><span class="pre">test_evaluator</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#test_evaluator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.evaluator.test_evaluator" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-pyqstrat.pyqstrat_cpp">
<span id="pyqstrat-pyqstrat-cpp-module"></span><h2>pyqstrat.pyqstrat_cpp module<a class="headerlink" href="#module-pyqstrat.pyqstrat_cpp" title="Permalink to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pyqstrat_cpp.black_scholes_price">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pyqstrat_cpp.</span></span><span class="sig-name descname"><span class="pre">black_scholes_price</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">call</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">S</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">K</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">object</span></span></span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.black_scholes_price" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute Euroepean option price
:param call: True for a call option, False for a put
:type call: bool
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param sigma: Annualized volatility.  Use 0.01 for 1%
:type sigma: float
:param q: Annualized dividend yield.  Use 0.01 for 1%.  Default 0
:type q: float, optional</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Option price</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pyqstrat_cpp.cdf">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pyqstrat_cpp.</span></span><span class="sig-name descname"><span class="pre">cdf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">object</span></span></span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.cdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Cumulative density function of normal distribution
:param x: random variable
:type x: float</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>cdf of the random variable</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pyqstrat_cpp.d1">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pyqstrat_cpp.</span></span><span class="sig-name descname"><span class="pre">d1</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">S</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">K</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">object</span></span></span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.d1" title="Permalink to this definition">¶</a></dt>
<dd><p>d1 from Black Scholes
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param sigma: Annualized volatility.  Use 0.01 for 1%
:type sigma: float
:param q: Annualized dividend yield.  Use 0.01 for 1%
:type q: float</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pyqstrat_cpp.d2">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pyqstrat_cpp.</span></span><span class="sig-name descname"><span class="pre">d2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">S</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">K</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">object</span></span></span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.d2" title="Permalink to this definition">¶</a></dt>
<dd><p>d2 from Black Scholes
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param sigma: Annualized volatility.  Use 0.01 for 1%
:type sigma: float
:param q: Annualized dividend yield.  Use 0.01 for 1%
:type q: float</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pyqstrat_cpp.delta">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pyqstrat_cpp.</span></span><span class="sig-name descname"><span class="pre">delta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">call</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">S</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">K</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">object</span></span></span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.delta" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute European option delta
:param call: True for a call option, False for a put
:type call: bool
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param sigma: Annualized volatility.  Use 0.01 for 1%
:type sigma: float
:param q: Annualized dividend yield.  Use 0.01 for 1%.  Default 0
:type q: float, optional</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Option delta</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pyqstrat_cpp.gamma">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pyqstrat_cpp.</span></span><span class="sig-name descname"><span class="pre">gamma</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">S</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">K</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">object</span></span></span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.gamma" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute European option gamma.
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param sigma: Annualized volatility.  Use 0.01 for 1%
:type sigma: float
:param q: Annualized dividend yield.  Use 0.01 for 1%.  Default 0
:type q: float, optional</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Option gamma</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pyqstrat_cpp.implied_vol">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pyqstrat_cpp.</span></span><span class="sig-name descname"><span class="pre">implied_vol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">call</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">price</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">S</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">K</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">object</span></span></span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.implied_vol" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute implied volatility for a European option.
:param call: True for a call option, False for a put
:type call: bool
:param price: The option premium
:type price: float
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param q: Annualized dividend yield.  Use 0.01 for 1%.  Default 0
:type q: float, optional</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Implied volatility.  For 1% we return 0.01</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pyqstrat_cpp.rho">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pyqstrat_cpp.</span></span><span class="sig-name descname"><span class="pre">rho</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">call</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">S</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">K</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">object</span></span></span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.rho" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute European option rho.  This is Black Scholes formula rho divided by 100 so we get rho per 1% change in interest rate
:param call: True for a European call option, False for a put
:type call: bool
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param sigma: Annualized volatility.  Use 0.01 for 1%
:type sigma: float
:param q: Annualized dividend yield.  Use 0.01 for 1%.  Default 0
:type q: float, optional</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Option theta</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pyqstrat_cpp.theta">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pyqstrat_cpp.</span></span><span class="sig-name descname"><span class="pre">theta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">call</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">K</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">object</span></span></span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.theta" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute European option theta per day.  This is Black Scholes formula theta divided by 365 to give us the customary theta per day
:param call: True for a call option, False for a put
:type call: bool
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param sigma: Annualized volatility.  Use 0.01 for 1%
:type sigma: float
:param q: Annualized dividend yield.  Use 0.01 for 1%.  Default 0
:type q: float, optional</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Option theta</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.pyqstrat_cpp.vega">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pyqstrat_cpp.</span></span><span class="sig-name descname"><span class="pre">vega</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">S</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">K</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.vega" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute European option vega.  This is Black Scholes formula vega divided by 100 so we get rho per 1% change in interest rate
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param sigma: Annualized volatility.  Use 0.01 for 1%
:type sigma: float
:param q: Annualized dividend yield.  Use 0.01 for 1%.  Default 0
:type q: float, optional</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Option vega</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-0">
<span id="pyqstrat-pyqstrat-io-module"></span><h2>pyqstrat.pyqstrat_io module<a class="headerlink" href="#module-0" title="Permalink to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="id7">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pyqstrat_cpp.</span></span><span class="sig-name descname"><span class="pre">black_scholes_price</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">call</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">S</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">K</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">object</span></span></span><a class="headerlink" href="#id7" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute Euroepean option price
:param call: True for a call option, False for a put
:type call: bool
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param sigma: Annualized volatility.  Use 0.01 for 1%
:type sigma: float
:param q: Annualized dividend yield.  Use 0.01 for 1%.  Default 0
:type q: float, optional</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Option price</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id8">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pyqstrat_cpp.</span></span><span class="sig-name descname"><span class="pre">cdf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">object</span></span></span><a class="headerlink" href="#id8" title="Permalink to this definition">¶</a></dt>
<dd><p>Cumulative density function of normal distribution
:param x: random variable
:type x: float</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>cdf of the random variable</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id9">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pyqstrat_cpp.</span></span><span class="sig-name descname"><span class="pre">d1</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">S</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">K</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">object</span></span></span><a class="headerlink" href="#id9" title="Permalink to this definition">¶</a></dt>
<dd><p>d1 from Black Scholes
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param sigma: Annualized volatility.  Use 0.01 for 1%
:type sigma: float
:param q: Annualized dividend yield.  Use 0.01 for 1%
:type q: float</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id10">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pyqstrat_cpp.</span></span><span class="sig-name descname"><span class="pre">d2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">S</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">K</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">object</span></span></span><a class="headerlink" href="#id10" title="Permalink to this definition">¶</a></dt>
<dd><p>d2 from Black Scholes
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param sigma: Annualized volatility.  Use 0.01 for 1%
:type sigma: float
:param q: Annualized dividend yield.  Use 0.01 for 1%
:type q: float</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id11">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pyqstrat_cpp.</span></span><span class="sig-name descname"><span class="pre">delta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">call</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">S</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">K</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">object</span></span></span><a class="headerlink" href="#id11" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute European option delta
:param call: True for a call option, False for a put
:type call: bool
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param sigma: Annualized volatility.  Use 0.01 for 1%
:type sigma: float
:param q: Annualized dividend yield.  Use 0.01 for 1%.  Default 0
:type q: float, optional</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Option delta</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id12">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pyqstrat_cpp.</span></span><span class="sig-name descname"><span class="pre">gamma</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">S</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">K</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">object</span></span></span><a class="headerlink" href="#id12" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute European option gamma.
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param sigma: Annualized volatility.  Use 0.01 for 1%
:type sigma: float
:param q: Annualized dividend yield.  Use 0.01 for 1%.  Default 0
:type q: float, optional</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Option gamma</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id13">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pyqstrat_cpp.</span></span><span class="sig-name descname"><span class="pre">implied_vol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">call</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">price</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">S</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">K</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">object</span></span></span><a class="headerlink" href="#id13" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute implied volatility for a European option.
:param call: True for a call option, False for a put
:type call: bool
:param price: The option premium
:type price: float
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param q: Annualized dividend yield.  Use 0.01 for 1%.  Default 0
:type q: float, optional</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Implied volatility.  For 1% we return 0.01</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id14">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pyqstrat_cpp.</span></span><span class="sig-name descname"><span class="pre">rho</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">call</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">S</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">K</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">object</span></span></span><a class="headerlink" href="#id14" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute European option rho.  This is Black Scholes formula rho divided by 100 so we get rho per 1% change in interest rate
:param call: True for a European call option, False for a put
:type call: bool
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param sigma: Annualized volatility.  Use 0.01 for 1%
:type sigma: float
:param q: Annualized dividend yield.  Use 0.01 for 1%.  Default 0
:type q: float, optional</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Option theta</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id15">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pyqstrat_cpp.</span></span><span class="sig-name descname"><span class="pre">theta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">call</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">K</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.float64</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">object</span></span></span><a class="headerlink" href="#id15" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute European option theta per day.  This is Black Scholes formula theta divided by 365 to give us the customary theta per day
:param call: True for a call option, False for a put
:type call: bool
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param sigma: Annualized volatility.  Use 0.01 for 1%
:type sigma: float
:param q: Annualized dividend yield.  Use 0.01 for 1%.  Default 0
:type q: float, optional</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Option theta</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id16">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.pyqstrat_cpp.</span></span><span class="sig-name descname"><span class="pre">vega</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">S</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">K</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="headerlink" href="#id16" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute European option vega.  This is Black Scholes formula vega divided by 100 so we get rho per 1% change in interest rate
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param sigma: Annualized volatility.  Use 0.01 for 1%
:type sigma: float
:param q: Annualized dividend yield.  Use 0.01 for 1%.  Default 0
:type q: float, optional</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Option vega</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-pyqstrat.trade_bars">
<span id="pyqstrat-trade-bars-module"></span><h2>pyqstrat.trade_bars module<a class="headerlink" href="#module-pyqstrat.trade_bars" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.trade_bars.TradeBars">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.trade_bars.</span></span><span class="sig-name descname"><span class="pre">TradeBars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">o</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">h</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">l</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vwap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Used to store OHLCV bars.  You must at least supply timestamps and close prices.  All other fields are optional.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.trade_bars.TradeBars.timestamp">
<span class="sig-name descname"><span class="pre">timestamp</span></span><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>A numpy datetime array with the datetime for each bar.  Must be monotonically increasing.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.trade_bars.TradeBars.c">
<span class="sig-name descname"><span class="pre">c</span></span><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.c" title="Permalink to this definition">¶</a></dt>
<dd><p>A numpy float array with close prices for the bar.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.trade_bars.TradeBars.o">
<span class="sig-name descname"><span class="pre">o</span></span><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.o" title="Permalink to this definition">¶</a></dt>
<dd><p>A numpy float array with open prices . Default None</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.trade_bars.TradeBars.h">
<span class="sig-name descname"><span class="pre">h</span></span><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.h" title="Permalink to this definition">¶</a></dt>
<dd><p>A numpy float array with high prices. Default None</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.trade_bars.TradeBars.l">
<span class="sig-name descname"><span class="pre">l</span></span><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.l" title="Permalink to this definition">¶</a></dt>
<dd><p>A numpy float array with high prices. Default None</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.trade_bars.TradeBars.v">
<span class="sig-name descname"><span class="pre">v</span></span><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.v" title="Permalink to this definition">¶</a></dt>
<dd><p>A numpy integer array with volume for the bar. Default None</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.trade_bars.TradeBars.vwap">
<span class="sig-name descname"><span class="pre">vwap</span></span><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.vwap" title="Permalink to this definition">¶</a></dt>
<dd><p>A numpy float array with the volume weighted average price for the bar.  Default None</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.trade_bars.TradeBars.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">o</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">h</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">l</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vwap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Zeroes in o, h, l, c are set to nan</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.trade_bars.TradeBars.add_timestamps">
<span class="sig-name descname"><span class="pre">add_timestamps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamps</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.add_timestamps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.add_timestamps" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds new timestamps to a market data object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timestamps</strong> (<em>np.array of np.datetime64</em>) – New timestamps to add.  Does not have to be sorted or unique</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">timestamps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;2018-01-05&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-09&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-10&#39;</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;M8[ns]&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">8.1</span><span class="p">,</span> <span class="mf">8.2</span><span class="p">,</span> <span class="mf">8.3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">o</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trade_bar</span> <span class="o">=</span> <span class="n">TradeBars</span><span class="p">(</span><span class="n">timestamps</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">o</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_timestamps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;2018-01-07&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-09&#39;</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;M8[ns]&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trade_bar</span><span class="o">.</span><span class="n">add_timestamps</span><span class="p">(</span><span class="n">new_timestamps</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">trade_bar</span><span class="o">.</span><span class="n">timestamps</span><span class="p">)</span>
<span class="go">[&#39;2018-01-05T00:00:00.000000000&#39; &#39;2018-01-07T00:00:00.000000000&#39;</span>
<span class="go"> &#39;2018-01-09T00:00:00.000000000&#39; &#39;2018-01-10T00:00:00.000000000&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">formatter</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;float&#39;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s1">.4f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">})</span>  <span class="c1"># After numpy 1.13 positive floats don&#39;t have a leading space for sign</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">trade_bar</span><span class="o">.</span><span class="n">o</span><span class="p">,</span> <span class="n">trade_bar</span><span class="o">.</span><span class="n">c</span><span class="p">)</span>
<span class="go">[9.0000 nan 10.0000 11.0000] [8.1000 nan 8.2000 8.3000]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.trade_bars.TradeBars.describe">
<span class="sig-name descname"><span class="pre">describe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">warn_std</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_distribution_frequency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'15</span> <span class="pre">min'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_time_distribution</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.describe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>Describe the bars.  Shows an overview, errors and warnings for the bar data.  This is a good function to use
before running any backtests on a set of bar data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>warn_std</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – See warning function</p></li>
<li><p><strong>time_distribution_frequency</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – See time_distribution function</p></li>
<li><p><strong>print_time_distribution</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Whether to print the time distribution in addition to plotting it.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.trade_bars.TradeBars.df">
<span class="sig-name descname"><span class="pre">df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.df" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.trade_bars.TradeBars.errors">
<span class="sig-name descname"><span class="pre">errors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">display</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.errors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.errors" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dataframe indicating any highs that are lower than opens, closes, lows or lows that are higher than other columns
Also includes any ohlcv values that are negative</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.trade_bars.TradeBars.freq_str">
<span class="sig-name descname"><span class="pre">freq_str</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.freq_str"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.freq_str" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.trade_bars.TradeBars.has_ohlc">
<span class="sig-name descname"><span class="pre">has_ohlc</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.has_ohlc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.has_ohlc" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if we have all ohlc columns and none are empty</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.trade_bars.TradeBars.overview">
<span class="sig-name descname"><span class="pre">overview</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">display</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.overview"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.overview" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dataframe showing basic information about the data, including count, number and percent missing, min, max</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>display</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Whether to print out the warning dataframe as well as returning it</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.trade_bars.TradeBars.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(15,</span> <span class="pre">8)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampling_frequency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Price</span> <span class="pre">/</span> <span class="pre">Volume'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot a candlestick or line plot depending on whether we have ohlc data or just close prices</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>figsize</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – Size of the figure (default (15,8))</p></li>
<li><p><strong>date_range</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – A tuple of strings or numpy datetimes for plotting a smaller sample of the data, e.g. (“2018-01-01”, “2018-01-06”)</p></li>
<li><p><strong>sampling_frequency</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Downsample before plotting.  See pandas frequency strings for possible values.</p></li>
<li><p><strong>title</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Title of the graph, default “Price / Volume”</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.trade_bars.TradeBars.resample">
<span class="sig-name descname"><span class="pre">resample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sampling_frequency</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.resample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.resample" title="Permalink to this definition">¶</a></dt>
<dd><p>Downsample the trade bars data into a new bar frequency</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sampling_frequency</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – See sampling frequency in pandas</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<a class="reference internal" href="#pyqstrat.trade_bars.TradeBars" title="pyqstrat.trade_bars.TradeBars"><code class="xref py py-class docutils literal notranslate"><span class="pre">TradeBars</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.trade_bars.TradeBars.time_distribution">
<span class="sig-name descname"><span class="pre">time_distribution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frequency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'15</span> <span class="pre">minutes'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.time_distribution"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.time_distribution" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dataframe with the time distribution of the bars</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frequency</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The width of each bin (default “15 minutes”).  You can use hours or days as well.</p></li>
<li><p><strong>display</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Whether to display the data in addition to returning it.</p></li>
<li><p><strong>plot</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Whether to plot the data in addition to returning it.</p></li>
<li><p><strong>figsize</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]) – If plot is set, optional figure size for the plot (default (20,8))</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.trade_bars.TradeBars.valid_row">
<span class="sig-name descname"><span class="pre">valid_row</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.valid_row"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.valid_row" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the row with index i has no nans in it.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.trade_bars.TradeBars.warnings">
<span class="sig-name descname"><span class="pre">warnings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">warn_std</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.warnings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.warnings" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dataframe indicating any values where the bar over bar change is more than warn_std standard deviations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>warn_std</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Number of standard deviations to use as a threshold (default 10)</p></li>
<li><p><strong>display</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Whether to print out the warning dataframe as well as returning it</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.trade_bars.roll_futures">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.trade_bars.</span></span><span class="sig-name descname"><span class="pre">roll_futures</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fut_prices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">condition_func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expiries</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_full_df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#roll_futures"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.trade_bars.roll_futures" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a continuous futures dataframe with one row per datetime given rolling logic</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fut_prices</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – A dataframe containing the columns ‘date’, ‘series’, and any other market data,
for example, ohlcv data. Date can contain time for sub-daily bars.
The series column must contain a different string name for each futures series, e.g. SEP2018, DEC2018, etc.</p></li>
<li><p><strong>date_func</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – A function that takes the future prices as an input and returns a numpy array of booleans
True indicates that the future should be rolled on this date if the condition specified in condition_func is met.
This function can assume that we have all the columns in the original market data object plus the same
columns suffixed with _next for the potential series to roll over to.</p></li>
<li><p><strong>condition_func</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – A function that takes the future prices as input and returns a numpy array of booleans.
True indicates that we should try to roll the future at that row.</p></li>
<li><p><strong>expiries</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>]) – An optional dataframe with 2 columns, ‘series’ and ‘expiry’.  This should have one row per future series
indicating that future’s expiry date.
If you don’t pass this in, the function will assume that the expiry column is present in the original dataframe.</p></li>
<li><p><strong>return_full_df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If set, will return the datframe without removing extra timestamps so you can use your own logic for rolling,
including the _next columns and the roll flag</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>A pandas DataFrame with one row per date, which contains the columns in the original md DataFrame and the same columns suffixed with _next</dt><dd><p>representing the series we want to roll to.  There is also a column called roll_flag which is set to True whenever
the date and roll condition functions are met.</p>
</dd>
</dl>
</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fut_prices</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2018-03-11&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2018-03-16&#39;</span><span class="p">)),</span>
<span class="gp">... </span>                                          <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2018-03-11&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2018-03-16&#39;</span><span class="p">)))),</span>
<span class="gp">... </span>                  <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mf">10.1</span><span class="p">,</span> <span class="mf">10.2</span><span class="p">,</span> <span class="mf">10.3</span><span class="p">,</span> <span class="mf">10.4</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mf">10.35</span><span class="p">,</span> <span class="mf">10.45</span><span class="p">,</span> <span class="mf">10.55</span><span class="p">,</span> <span class="mf">10.65</span><span class="p">,</span> <span class="mf">10.75</span><span class="p">],</span>
<span class="gp">... </span>                  <span class="s1">&#39;v&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">300</span><span class="p">],</span>
<span class="gp">... </span>                  <span class="s1">&#39;series&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;MAR2018&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;JUN2018&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span><span class="p">})[[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">,</span><span class="s1">&#39;series&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;v&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expiries</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;2018-03-15&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-06-15&#39;</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;M8[D]&#39;</span><span class="p">),</span> <span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;MAR2018&#39;</span><span class="p">,</span> <span class="s1">&#39;JUN2018&#39;</span><span class="p">],</span> <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;expiry&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">date_func</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">fut_prices</span><span class="p">:</span> <span class="n">fut_prices</span><span class="o">.</span><span class="n">expiry</span> <span class="o">-</span> <span class="n">fut_prices</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">&lt;=</span> <span class="n">np</span><span class="o">.</span><span class="n">timedelta64</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">condition_func</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">fut_prices</span><span class="p">:</span> <span class="n">fut_prices</span><span class="o">.</span><span class="n">v_next</span> <span class="o">&gt;</span> <span class="n">fut_prices</span><span class="o">.</span><span class="n">v</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">roll_futures</span><span class="p">(</span><span class="n">fut_prices</span><span class="p">,</span> <span class="n">date_func</span><span class="p">,</span> <span class="n">condition_func</span><span class="p">,</span> <span class="n">expiries</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">series</span> <span class="o">==</span> <span class="s1">&#39;MAR2018&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">values</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2018-03-14&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">series</span> <span class="o">==</span> <span class="s1">&#39;JUN2018&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">values</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2018-03-15&#39;</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.trade_bars.sort_trade_bars">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.trade_bars.</span></span><span class="sig-name descname"><span class="pre">sort_trade_bars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">columns</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#sort_trade_bars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.trade_bars.sort_trade_bars" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of column names, sort them in olhcv order</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.trade_bars.test_trade_bars">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.trade_bars.</span></span><span class="sig-name descname"><span class="pre">test_trade_bars</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#test_trade_bars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.trade_bars.test_trade_bars" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="pyqstrat-interactive-plot-module">
<h2>pyqstrat.interactive_plot module<a class="headerlink" href="#pyqstrat-interactive-plot-module" title="Permalink to this heading">¶</a></h2>
<span class="target" id="module-pyqstrat.interactive_plot"></span><dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.InteractivePlot">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.interactive_plot.</span></span><span class="sig-name descname"><span class="pre">InteractivePlot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transform_func=&lt;pyqstrat.interactive_plot.SimpleTransform</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create_selection_widgets_func=&lt;function</span> <span class="pre">create_selection_dropdowns&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim_filter_func=&lt;function</span> <span class="pre">simple_dimension_filter&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_filter_func=&lt;function</span> <span class="pre">simple_data_filter&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stat_func=&lt;pyqstrat.interactive_plot.MeanWithCI</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_func=&lt;pyqstrat.interactive_plot.LineGraphWithDetailDisplay</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_form_func=&lt;function</span> <span class="pre">display_form&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#InteractivePlot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.InteractivePlot" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Creates a multidimensional interactive plot off a dataframe.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.InteractivePlot.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transform_func=&lt;pyqstrat.interactive_plot.SimpleTransform</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create_selection_widgets_func=&lt;function</span> <span class="pre">create_selection_dropdowns&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim_filter_func=&lt;function</span> <span class="pre">simple_dimension_filter&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_filter_func=&lt;function</span> <span class="pre">simple_data_filter&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stat_func=&lt;pyqstrat.interactive_plot.MeanWithCI</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_func=&lt;pyqstrat.interactive_plot.LineGraphWithDetailDisplay</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_form_func=&lt;function</span> <span class="pre">display_form&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#InteractivePlot.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.InteractivePlot.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – The pandas dataframe to use for plotting</p></li>
<li><p><strong>labels</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – A dict where column names from the dataframe are mapped to user friendly labels. For any column names
not found as keys in this dict, we use the column name as the label. Default None</p></li>
<li><p><strong>dim_filter_func</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]]], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – A function that generates the values of a dimension based on other dimensions. For example, if
the user chooses “Put Option” in a put/call dropdown, the valid strikes could change in a Strike
dropdown that follows. Default simple_dimension_filter</p></li>
<li><p><strong>data_filter_func</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]]], <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>]) – A function that filters the data to plot. For example, if the user chooses “Put Option” in a put/call dropdown,
we could filter the dataframe to only include put options. Default simple_data_filter</p></li>
<li><p><strong>stat_func</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>]]]]) – Once we have filtered the data, we may need to plot some statistics, such as mean and confidence intervals.
In this function, we compute these statistics. Default MeanWithCI()</p></li>
<li><p><strong>plot_func</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>]]]], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Widget</span></code>]]) – A function that plots the data.  This could also display detail data used to compute the statistics associated
with each data point.</p></li>
<li><p><strong>display_form_func</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Widget</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – A function that displays the form given a list of plotly widgets (including the graph widget)</p></li>
<li><p><strong>debug</strong> – Dont clear forms if this is true so we can see print output</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.InteractivePlot.create_pivot">
<span class="sig-name descname"><span class="pre">create_pivot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xcol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ycol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zcol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dimensions</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#InteractivePlot.create_pivot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.InteractivePlot.create_pivot" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the initial pivot
:type xcol: <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>
:param xcol: Column name to use as the x axis in the DataFrame
:type ycol: <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>
:param ycol: Column name to use as the y axis in the DataFrame
:type zcol: <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>
:param zcol: Column name to use for z-values. Each zvalue can be used for a different trace within this plot. For example, a column</p>
<blockquote>
<div><p>called “option_type” could contain the values “American”, “European”, “Bermudan” and we could plot the data for each type
in a separate trace</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dimensions</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]) – The column names used for filter dimensions. For example, we may want to filter by days to expiration and put/call
The key the column name and the value is the initial value for that column. For example, in a
dropdown for Put/Call we may want “Put” to be the initial value set in the dropdown.  Set to None if you
don’t care what initial value is chosen.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.InteractivePlot.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">owner_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#InteractivePlot.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.InteractivePlot.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Redraw the form using the values of all widgets above and including the one with index owner_idx.
If owner_idx is -1, we redraw everything.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.LineConfig">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.interactive_plot.</span></span><span class="sig-name descname"><span class="pre">LineConfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thickness</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">nan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">secondary_y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lines+markers'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_detail</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#LineConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.LineConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.LineConfig.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thickness</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">nan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">secondary_y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lines+markers'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_detail</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.interactive_plot.LineConfig.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.LineConfig.color">
<span class="sig-name descname"><span class="pre">color</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#pyqstrat.interactive_plot.LineConfig.color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.LineConfig.marker_mode">
<span class="sig-name descname"><span class="pre">marker_mode</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'lines+markers'</span></em><a class="headerlink" href="#pyqstrat.interactive_plot.LineConfig.marker_mode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.LineConfig.secondary_y">
<span class="sig-name descname"><span class="pre">secondary_y</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#pyqstrat.interactive_plot.LineConfig.secondary_y" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.LineConfig.show_detail">
<span class="sig-name descname"><span class="pre">show_detail</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#pyqstrat.interactive_plot.LineConfig.show_detail" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.LineConfig.thickness">
<span class="sig-name descname"><span class="pre">thickness</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">nan</span></em><a class="headerlink" href="#pyqstrat.interactive_plot.LineConfig.thickness" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.LineGraphWithDetailDisplay">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.interactive_plot.</span></span><span class="sig-name descname"><span class="pre">LineGraphWithDetailDisplay</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">display_detail_func=&lt;pyqstrat.interactive_plot.SimpleDetailTable</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_configs={}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hovertemplate=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#LineGraphWithDetailDisplay"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.LineGraphWithDetailDisplay" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Draws line graphs and also includes a detail pane.
When you click on a point on the line graph, the detail pane shows the data used to compute that point.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.LineGraphWithDetailDisplay.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xaxis_title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">yaxis_title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#LineGraphWithDetailDisplay.__call__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.LineGraphWithDetailDisplay.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw the plot and also set it up so if you click on a point, we display the data used to compute that point.
:type line_data: <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>]]]
:param line_data: The zvalue, plot data, and detail data for each line to draw. The plot data must have</p>
<blockquote>
<div><blockquote>
<div><p>x as the first column and y as the second column</p>
</div></blockquote>
<dl class="simple">
<dt>Return:</dt><dd><p>A list of widgets to draw.  In this case, a figure widget and a output widget which contains the detail display</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Widget</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.LineGraphWithDetailDisplay.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">display_detail_func=&lt;pyqstrat.interactive_plot.SimpleDetailTable</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_configs={}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hovertemplate=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#LineGraphWithDetailDisplay.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.LineGraphWithDetailDisplay.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>display_detail_func</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">Widget</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – A function that displays the data on the detail pane. Default SimpleDetailTable</p></li>
<li><p><strong>line_configs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <a class="reference internal" href="#pyqstrat.interactive_plot.LineConfig" title="pyqstrat.interactive_plot.LineConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">LineConfig</span></code></a>]) – Configuration of each line. The key in this dict is the zvalue for that line.  Default {}</p></li>
<li><p><strong>title</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Title of the graph. Default None</p></li>
<li><p><strong>hovertemplate</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – What to display when we hover over a point on the graph.  See plotly hovertemplate</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.MeanWithCI">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.interactive_plot.</span></span><span class="sig-name descname"><span class="pre">MeanWithCI</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mean_func=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ci_level=0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#MeanWithCI"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.MeanWithCI" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Computes mean (or median) and optionally confidence intervals for plotting</p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.MeanWithCI.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filtered_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xcol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ycol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zcol</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#MeanWithCI.__call__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.MeanWithCI.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>For each unique value of x and z, compute mean (and optionally ci) of y.
:rtype: <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>]]]
:returns: x, y data for plotting lines of the mean of y versus x for each z and the data used to compute the mean</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.MeanWithCI.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mean_func=&lt;function</span> <span class="pre">nanmean&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ci_level=0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#MeanWithCI.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.MeanWithCI.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mean</strong> – The function to compute ci for</p></li>
<li><p><strong>ci_level</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Set to 0 for no confidence intervals, or the level you want.
For example, set to 95 to compute a 95% confidence interval. Default 0</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.SimpleDetailTable">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.interactive_plot.</span></span><span class="sig-name descname"><span class="pre">SimpleDetailTable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">colnames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">float_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'{:.4g}'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_rows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy_to_clipboard</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#SimpleDetailTable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.SimpleDetailTable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Displays a pandas DataFrame under a plot that contains the data used to compute a statistic of y for each x, y pair</p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.SimpleDetailTable.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">detail_widget</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#SimpleDetailTable.__call__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.SimpleDetailTable.__call__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>detail_widget</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Widget</span></code>) – The widget to display the data in</p></li>
<li><p><strong>data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – The dataframe to display</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.SimpleDetailTable.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">colnames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">float_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'{:.4g}'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_rows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy_to_clipboard</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#SimpleDetailTable.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.SimpleDetailTable.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>colnames</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – List of column names to display. If None we display all columns. Default None</p></li>
<li><p><strong>float_format</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Format for each floating point column. Default {:.4g}</p></li>
<li><p><strong>min_rows</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Do not truncate the display of the table before this many rows. Default 100</p></li>
<li><p><strong>copy_to_clipboard</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If set, we copy the dataframe to the clipboard. On linux, you must install xclip for this to work</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.SimpleTransform">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.interactive_plot.</span></span><span class="sig-name descname"><span class="pre">SimpleTransform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transforms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#SimpleTransform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.SimpleTransform" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Initial transformation of data.  For example, you might add columns that are quantiles of other columns</p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.SimpleTransform.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#SimpleTransform.__call__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.SimpleTransform.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Call self as a function.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.SimpleTransform.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transforms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#SimpleTransform.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.SimpleTransform.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.TestInteractivePlot">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.interactive_plot.</span></span><span class="sig-name descname"><span class="pre">TestInteractivePlot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">methodName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'runTest'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#TestInteractivePlot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.TestInteractivePlot" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">TestCase</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.TestInteractivePlot.test_interactive_plot">
<span class="sig-name descname"><span class="pre">test_interactive_plot</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#TestInteractivePlot.test_interactive_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.TestInteractivePlot.test_interactive_plot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.TestInteractivePlot.transform">
<span class="sig-name descname"><span class="pre">transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#TestInteractivePlot.transform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.TestInteractivePlot.transform" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.create_selection_dropdowns">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.interactive_plot.</span></span><span class="sig-name descname"><span class="pre">create_selection_dropdowns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dims</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_form_func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#create_selection_dropdowns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.create_selection_dropdowns" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a list of selection widgets</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.display_form">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.interactive_plot.</span></span><span class="sig-name descname"><span class="pre">display_form</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">form_widgets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#display_form"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.display_form" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.foo">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.interactive_plot.</span></span><span class="sig-name descname"><span class="pre">foo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">old</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#foo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.foo" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.on_widgets_updated">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.interactive_plot.</span></span><span class="sig-name descname"><span class="pre">on_widgets_updated</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">change</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_form_func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selection_widgets</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#on_widgets_updated"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.on_widgets_updated" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback called by plotly when widgets are updated by the user.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.percentile_buckets">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.interactive_plot.</span></span><span class="sig-name descname"><span class="pre">percentile_buckets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#percentile_buckets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.percentile_buckets" title="Permalink to this definition">¶</a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">percentile_buckets</span><span class="p">(</span><span class="n">a</span><span class="p">)),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span> <span class="n">atol</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.simple_data_filter">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.interactive_plot.</span></span><span class="sig-name descname"><span class="pre">simple_data_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selected_values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#simple_data_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.simple_data_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters a dataframe based on the selected values</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.interactive_plot.simple_dimension_filter">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.interactive_plot.</span></span><span class="sig-name descname"><span class="pre">simple_dimension_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selected_values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/interactive_plot.html#simple_dimension_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.interactive_plot.simple_dimension_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Produces a list to put into a dropdown for selecting a dimension value</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-pyqstrat.markets">
<span id="pyqstrat-markets-module"></span><h2>pyqstrat.markets module<a class="headerlink" href="#module-pyqstrat.markets" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.markets.EminiFuture">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.markets.</span></span><span class="sig-name descname"><span class="pre">EminiFuture</span></span><a class="reference internal" href="_modules/pyqstrat/markets.html#EminiFuture"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.markets.EminiFuture" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.markets.EminiFuture.calendar">
<span class="sig-name descname"><span class="pre">calendar</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;pyqstrat.holiday_calendars.Calendar</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#pyqstrat.markets.EminiFuture.calendar" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.markets.EminiFuture.get_current_symbol">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_current_symbol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">curr_date</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/markets.html#EminiFuture.get_current_symbol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.markets.EminiFuture.get_current_symbol" title="Permalink to this definition">¶</a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">EminiFuture</span><span class="o">.</span><span class="n">get_current_symbol</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">14</span><span class="p">))</span> <span class="o">==</span> <span class="s1">&#39;ESH9&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">EminiFuture</span><span class="o">.</span><span class="n">get_current_symbol</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">15</span><span class="p">))</span> <span class="o">==</span> <span class="s1">&#39;ESM9&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">EminiFuture</span><span class="o">.</span><span class="n">get_current_symbol</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">14</span><span class="p">))</span> <span class="o">==</span> <span class="s1">&#39;ESH0&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.markets.EminiFuture.get_expiry">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_expiry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fut_symbol</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/markets.html#EminiFuture.get_expiry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.markets.EminiFuture.get_expiry" title="Permalink to this definition">¶</a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">EminiFuture</span><span class="o">.</span><span class="n">get_expiry</span><span class="p">(</span><span class="s1">&#39;ESH8&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2018-03-16T08:30&#39;</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.markets.EminiFuture.get_next_symbol">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_next_symbol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">curr_future_symbol</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/markets.html#EminiFuture.get_next_symbol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.markets.EminiFuture.get_next_symbol" title="Permalink to this definition">¶</a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">EminiFuture</span><span class="o">.</span><span class="n">get_next_symbol</span><span class="p">(</span><span class="s1">&#39;ESZ8&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;ESH9&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.markets.EminiFuture.get_previous_symbol">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_previous_symbol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">curr_future_symbol</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/markets.html#EminiFuture.get_previous_symbol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.markets.EminiFuture.get_previous_symbol" title="Permalink to this definition">¶</a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">EminiFuture</span><span class="o">.</span><span class="n">get_previous_symbol</span><span class="p">(</span><span class="s1">&#39;ESH9&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;ESZ8&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyqstrat.markets.EminiOption">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyqstrat.markets.</span></span><span class="sig-name descname"><span class="pre">EminiOption</span></span><a class="reference internal" href="_modules/pyqstrat/markets.html#EminiOption"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.markets.EminiOption" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyqstrat.markets.EminiOption.calendar">
<span class="sig-name descname"><span class="pre">calendar</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;pyqstrat.holiday_calendars.Calendar</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#pyqstrat.markets.EminiOption.calendar" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.markets.EminiOption.decode_symbol">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">decode_symbol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/markets.html#EminiOption.decode_symbol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.markets.EminiOption.decode_symbol" title="Permalink to this definition">¶</a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">EminiOption</span><span class="o">.</span><span class="n">decode_symbol</span><span class="p">(</span><span class="s1">&#39;E1AF8&#39;</span><span class="p">)</span>
<span class="go">(MO, 2018, 1, 1)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">weekday</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyqstrat.markets.EminiOption.get_expiry">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_expiry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">symbol</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/markets.html#EminiOption.get_expiry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.markets.EminiOption.get_expiry" title="Permalink to this definition">¶</a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">EminiOption</span><span class="o">.</span><span class="n">get_expiry</span><span class="p">(</span><span class="s1">&#39;EW2Z5&#39;</span><span class="p">)</span>
<span class="go">numpy.datetime64(&#39;2015-12-11T15:00&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EminiOption</span><span class="o">.</span><span class="n">get_expiry</span><span class="p">(</span><span class="s1">&#39;E3AF7&#39;</span><span class="p">)</span>
<span class="go">numpy.datetime64(&#39;2017-01-17T15:00&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EminiOption</span><span class="o">.</span><span class="n">get_expiry</span><span class="p">(</span><span class="s1">&#39;EWF0&#39;</span><span class="p">)</span>
<span class="go">numpy.datetime64(&#39;2020-01-31T15:00&#39;)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.markets.future_code_to_month">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.markets.</span></span><span class="sig-name descname"><span class="pre">future_code_to_month</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">future_code</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/markets.html#future_code_to_month"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.markets.future_code_to_month" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a future code such as “X”, return the month abbreviation, such as “nov”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>future_code</strong> (<em>str</em>) – the one letter future code</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">future_code_to_month</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="go">&#39;nov&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.markets.future_code_to_month_number">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.markets.</span></span><span class="sig-name descname"><span class="pre">future_code_to_month_number</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">future_code</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/markets.html#future_code_to_month_number"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.markets.future_code_to_month_number" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a future code such as “X”, return the month number (from 1 - 12)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>future_code</strong> (<em>str</em>) – the one letter future code</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">future_code_to_month_number</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="go">11</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyqstrat.markets.get_future_code">
<span class="sig-prename descclassname"><span class="pre">pyqstrat.markets.</span></span><span class="sig-name descname"><span class="pre">get_future_code</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">month</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/markets.html#get_future_code"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyqstrat.markets.get_future_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a month number such as 3 for March, return the future code for it, e.g. H
&gt;&gt;&gt; get_future_code(3)
‘H’</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-pyqstrat">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-pyqstrat" title="Permalink to this heading">¶</a></h2>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">pyqstrat</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">pyqstrat</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">pyqstrat package</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="modules.html">pyqstrat</a><ul>
      <li>Previous: <a href="modules.html" title="previous chapter">pyqstrat</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Sal Abbasi.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.1.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/pyqstrat.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>